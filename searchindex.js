Search.setIndex({"docnames": ["ARCHITECTURE", "CONTRIBUTING", "README", "dataset", "demo_notebooks/cnn_example", "demo_notebooks/mlp_example", "demo_notebooks/quickstart_example", "demo_notebooks/water_conservation", "evaluating", "evaluation/ClimSim_metrics", "evaluation/bias_calculation", "evaluation/main_figure_generation", "evaluation/plot_R2_analysis", "figures/climsim_figures", "installation", "models", "quickstart"], "filenames": ["ARCHITECTURE.md", "CONTRIBUTING.md", "README.md", "dataset.md", "demo_notebooks/cnn_example.ipynb", "demo_notebooks/mlp_example.ipynb", "demo_notebooks/quickstart_example.ipynb", "demo_notebooks/water_conservation.ipynb", "evaluating.md", "evaluation/ClimSim_metrics.ipynb", "evaluation/bias_calculation.ipynb", "evaluation/main_figure_generation.ipynb", "evaluation/plot_R2_analysis.ipynb", "figures/climsim_figures.ipynb", "installation.md", "models.md", "quickstart.md"], "titles": ["Project structure", "Contributor Guidelines", "ClimSim: An open large-scale dataset for training high-resolution physics emulators in hybrid multi-scale climate simulators", "Dataset Information", "Convolutional Neural Network (CNN) Example", "Multi-Layer Perceptron (MLP) Example", "Import data_utils", "Water Conservation Example", "Evaluation", "ClimSim: Metrics calculation and visualization", "Import data_utils", "Evaluation metrics", "Prediction skill of temperature and specific humidity tendencies", "&lt;no title&gt;", "Code Installation", "Baseline Models", "Quickstart"], "terms": {"github": [0, 1, 2, 8, 15, 16], "action": [0, 1], "workflow": 0, "baseline_model": [0, 15], "pretrain": 0, "baselin": [0, 2, 8], "model": [0, 3, 4, 5, 7, 8, 10, 11, 12, 13, 16], "well": [0, 15, 16], "python": [0, 4, 5, 9, 13, 14, 16], "script": [0, 9, 16], "depend": [0, 4, 14, 16], "re": 0, "train": [0, 3, 7, 15, 16], "cnn": [0, 2, 8, 9, 10, 11, 12, 13, 15, 16], "convolut": [0, 2, 15], "neural": [0, 2, 5, 15], "network": [0, 2, 5, 15], "ed": [0, 8, 9, 10, 11, 12, 13, 15], "encod": [0, 15], "decod": [0, 15], "hsr": [0, 8, 9, 10, 11, 12, 13, 15], "heteroskedast": [0, 15], "regress": [0, 2, 15], "mlp": [0, 2, 8, 10, 11, 12, 13, 15], "multilay": 0, "perceptron": [0, 2, 15], "rpn": [0, 8, 9, 10, 11, 12, 13, 15], "random": [0, 4, 5, 15], "prior": [0, 15], "cvae": [0, 8, 9, 10, 11, 12, 13, 15], "condit": [0, 7, 15], "variat": [0, 15], "autoencod": [0, 15], "climsim_util": [0, 6, 8, 10, 11, 12, 14, 16], "instal": [0, 2, 16], "packag": [0, 9, 13], "data": [0, 3, 9, 13, 16], "preprocess": [0, 3, 6, 10, 14, 16], "evalu": [0, 1, 9, 14, 16], "dataset_statist": 0, "precomput": 0, "statist": 0, "input": [0, 2, 3, 6, 7, 10, 11, 12, 15], "output": [0, 2, 3, 6, 7, 12], "variabl": [0, 3, 6, 8, 10, 11, 15, 16], "dataset": [0, 15, 16], "demo_notebook": [0, 1], "jupyt": [0, 1, 15], "notebook": [0, 1, 3, 7, 8, 15, 16], "exampl": [0, 2], "how": [0, 4, 15, 16], "us": [0, 1, 3, 4, 5, 6, 8, 9, 11, 12, 13, 15, 16], "ml": [0, 2, 7, 9], "grid_info": [0, 6, 9, 10, 11, 12], "grid": [0, 3, 9, 13], "inform": [0, 2, 9], "low": [0, 3, 15, 16], "resolut": [0, 3, 13, 15, 16], "normal": [0, 4, 6, 9, 10, 11, 12], "factor": [0, 7], "test": [0, 4, 13, 16], "ani": 0, "kind": 0, "websit": 0, "document": [0, 4, 5, 13], "gitignor": 0, "list": [0, 3, 9, 10, 12], "file": [0, 1, 3, 4, 5, 7, 10, 12, 13], "ignor": [0, 4, 13], "git": 0, "licens": 0, "setup": 0, "py": [0, 6, 8, 9, 11, 13, 16], "readm": [0, 1], "md": [0, 1], "addit": [1, 16], "issu": 1, "from": [1, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 16], "commun": 1, "research": [1, 2], "wish": [1, 16], "off": 1, "climsim": [1, 3, 6, 10, 11, 12, 16], "make": [1, 4, 5, 7, 12], "our": [1, 15], "tool": [1, 14, 16], "ar": [1, 2, 3, 4, 5, 7, 8, 9, 12, 15], "welcom": 1, "can": [1, 3, 4, 5, 7, 14, 16], "rais": 1, "page": 1, "prefer": 1, "directli": 1, "email": 1, "maintain": 1, "built": 1, "book": 1, "To": [1, 4, 5, 6, 11, 12], "mimic": 1, "what": 1, "doe": [1, 4, 5, 16], "first": [1, 4, 5, 9, 16], "copi": [1, 9, 12], "demo": 1, "directori": [1, 4, 5], "cd": 1, "cp": [1, 9], "r": 1, "architectur": [1, 4], "figur": [1, 6, 7, 12], "creat": [1, 4, 5, 9, 10, 12, 13, 15], "conda": [1, 9], "environ": [1, 5, 14, 15, 16], "env": [1, 5, 9, 13], "f": [1, 4, 5, 6, 9, 11, 13], "yml": 1, "activ": [1, 4, 5], "doc": [1, 4, 5, 9], "run": [1, 3, 5, 9, 14, 16], "follow": [1, 4, 5, 6, 7, 11, 12, 14, 16], "command": 1, "The": [1, 2, 3, 4, 7, 8, 9, 12, 15, 16], "html": [1, 9], "content": 1, "folder": [1, 8, 15], "call": [1, 5, 13], "_build": 1, "view": 1, "open": 1, "index": [1, 4, 5, 6, 9, 10, 11], "browser": 1, "largest": 2, "ever": 2, "design": 2, "It": [2, 4, 5, 16], "compris": 2, "develop": 2, "consortium": 2, "scientist": 2, "consist": [2, 4], "5": [2, 3, 4, 5, 6, 8, 10, 11, 13], "7": [2, 3, 4, 5, 6, 8, 9, 11, 13], "billion": [2, 3], "pair": 2, "multivari": 2, "vector": [2, 4, 5, 16], "isol": 2, "influenc": 2, "local": [2, 4, 5, 14, 16], "nest": 2, "fidel": 2, "host": [2, 5], "s": [2, 4, 5, 7, 9, 10, 12, 15, 16], "macro": 2, "state": 2, "global": [2, 4, 5, 7], "coverag": 2, "span": 2, "multipl": [2, 5], "year": [2, 3, 5], "sampl": [2, 3, 4, 5, 9], "frequenc": 2, "result": [2, 5, 9], "compat": 2, "downstream": 2, "coupl": 2, "oper": [2, 4, 5, 6, 11, 12], "we": [2, 4, 5, 7, 9, 16], "implement": 2, "rang": [2, 4, 5, 6, 9, 11], "determinist": 2, "stochast": [2, 16], "highlight": 2, "challeng": 2, "score": [2, 8, 9, 10, 11, 12, 16], "quickstart": [2, 3], "code": [2, 4, 7, 15, 16], "layer": [2, 4, 15], "water": [2, 9], "conserv": 2, "repositori": 2, "paper": [2, 3, 4, 16], "youtub": 2, "video": 2, "contributor": 2, "guid": 2, "multi": [3, 4, 15], "scale": [3, 4, 5, 6, 10, 11], "climat": 3, "e3sm": [3, 4, 5, 7, 9, 10, 12], "mmf": [3, 4, 5, 7, 10, 12], "simul": 3, "were": [3, 8, 15], "save": [3, 4], "20": [3, 4, 8], "minut": 3, "interv": 3, "10": [3, 4, 5, 8, 9, 13], "two": [3, 4], "netcdf": [3, 4, 5, 9], "target": [3, 8, 10, 11, 12, 15], "produc": 3, "each": [3, 4, 5, 6, 7, 8, 9, 10, 11, 15], "timestep": 3, "total": [3, 4, 5], "525": 3, "600": 3, "configur": 3, "3": [3, 4, 5, 6, 8, 11, 13, 16], "download": [3, 13, 16], "hug": [3, 5, 7], "face": 3, "high": 3, "real": [3, 4, 5, 15, 16], "geographi": [3, 15, 16], "1": [3, 4, 5, 6, 7, 10, 12, 13, 16], "x": [3, 4, 6, 9, 10, 11, 12, 13, 15], "horizont": [3, 4, 5, 6, 8, 9, 10, 11], "21": [3, 4, 8, 9, 11, 12, 13], "column": [3, 4, 5, 6, 7, 9, 10, 11], "41": [3, 4, 5], "2": [3, 4, 5, 6, 8, 10, 11, 12, 13, 16], "tb": 3, "102": 3, "mb": [3, 5], "per": [3, 9], "61": [3, 8, 9], "11": [3, 4, 5, 8, 9], "384": [3, 4, 5, 9], "100": [3, 9, 10, 12], "million": 3, "744": 3, "gb": 3, "9": [3, 4, 5, 6, 7, 8, 9, 11, 13], "aquaplanet": 3, "label": 3, "mli": [3, 4, 5, 7, 10, 12], "yyyi": 3, "mm": 3, "dd": 3, "sssss": 3, "nc": [3, 4, 5, 6, 7, 9, 10, 11, 12, 13], "where": [3, 4, 5, 6, 9, 13], "sss": 3, "correspond": [3, 6, 15, 16], "month": [3, 5], "dai": [3, 4, 5], "second": [3, 4, 7], "being": 3, "space": [3, 6], "200": [3, 4, 5], "apart": 3, "same": [3, 4, 16], "wai": 3, "except": [3, 4, 5], "replac": [3, 4, 5, 9, 13], "mlo": [3, 4, 5, 7, 9], "scalar": [3, 9, 16], "vari": 3, "time": [3, 4, 5, 6, 7, 8, 9, 11, 16], "ncol": [3, 4, 5, 6, 9, 11, 13, 15], "while": [3, 4, 5], "vertic": [3, 4, 6, 8, 10, 11, 16], "resolv": [3, 4, 9, 16], "addition": 3, "lev": [3, 4, 7, 9, 13, 15], "For": [3, 5, 14], "lower": 3, "indic": [3, 4, 9], "higher": 3, "level": [3, 4, 5, 6, 7, 10, 11, 13], "atmospher": [3, 7], "thi": [3, 4, 5, 7, 8, 11, 12, 14, 16], "becaus": [3, 4], "pressur": [3, 7, 9, 15], "decreas": [3, 12], "monoton": [3, 12], "altitud": 3, "full": [3, 16], "found": [3, 8, 15, 16], "supplementari": 3, "tabl": [3, 9], "There": [3, 15], "also": [3, 9], "contain": [3, 9, 16], "subsampl": [3, 10, 12, 16], "prenorm": [3, 16], "wa": [3, 16], "valid": [3, 5, 9, 16], "metric": [3, 4, 5, 8, 13, 16], "reproduc": [3, 5, 16], "create_npy_data_split": [3, 16], "ipynb": [3, 16], "import": [4, 5, 7, 9, 13], "xarrai": [4, 5, 7, 13, 14, 16], "xr": [4, 5, 6, 7, 9, 10, 11, 12, 13], "numpi": [4, 5, 7, 9, 13], "np": [4, 5, 6, 7, 10, 11, 12, 13], "matplotlib": [4, 5, 7, 9, 13], "pyplot": [4, 5, 7, 9, 13], "plt": [4, 5, 6, 7, 9, 10, 11, 13], "glob": [4, 5, 9], "os": [4, 5, 7], "tensorflow": [4, 5, 6, 11, 12, 14, 16], "kera": [4, 5], "physical_devic": [4, 5], "config": [4, 5, 6, 10, 11, 12, 13], "list_physical_devic": [4, 5], "gpu": [4, 5], "print": [4, 5, 6, 13], "try": [4, 5], "kgpu": [4, 5], "len": [4, 5, 6, 9, 11, 13], "experiment": [4, 5], "set_memory_growth": [4, 5], "true": [4, 5, 6, 9, 11], "invalid": [4, 5, 6, 9, 11], "devic": [4, 5], "cannot": [4, 5], "modifi": [4, 5], "virtual": [4, 5], "onc": [4, 5, 7], "initi": [4, 5, 7], "pass": [4, 5], "2023": [4, 5, 6, 9, 11, 12], "05": [4, 5, 9, 13], "26": [4, 8, 9], "18": [4, 5, 8], "17": [4, 5, 8, 9], "02": [4, 7, 9, 13], "868544": 4, "i": [4, 5, 6, 8, 9, 11, 12], "tsl": 4, "cuda": [4, 5], "cudart_stub": 4, "cc": [4, 5, 6, 11, 12], "28": [4, 7, 8, 9], "could": [4, 6, 11, 12], "find": [4, 5, 6, 11, 12], "driver": [4, 5], "your": [4, 14, 16], "machin": 4, "948491": 4, "949921": 4, "core": [4, 5, 6, 11, 12], "platform": [4, 5, 6, 11, 12], "cpu_feature_guard": [4, 5, 6, 11, 12], "182": [4, 6, 8, 11, 12], "binari": [4, 5, 6, 11, 12], "optim": [4, 5, 6, 11, 12], "avail": [4, 5, 6, 11, 12], "cpu": [4, 5, 6, 11, 12], "instruct": [4, 5, 6, 11, 12], "perform": [4, 5, 6, 8, 11, 12], "critic": [4, 5, 6, 11, 12], "enabl": [4, 5, 6, 11, 12], "avx2": [4, 5, 6, 11, 12], "fma": [4, 5, 6, 11, 12], "other": [4, 5, 6, 11, 12], "rebuild": [4, 5, 6, 11, 12], "appropri": [4, 5, 6, 11, 12], "compil": [4, 5, 6, 11, 12], "flag": [4, 5, 6, 11, 12], "04": [4, 12], "241559": 4, "w": [4, 5, 6, 8, 9, 10, 11, 12, 15], "tf2tensorrt": [4, 6, 11, 12], "util": [4, 5, 6, 9, 11, 12], "py_util": [4, 6, 11, 12], "38": [4, 6, 8, 9, 11, 12], "trt": [4, 6, 11, 12], "warn": [4, 6, 9, 11, 12, 13], "tensorrt": [4, 6, 11, 12], "note": [4, 5, 7], "ptend_t": [4, 5, 9, 10, 13], "ptend_q0001": [4, 5, 9, 10, 13], "calcul": [4, 5, 8, 12], "http": [4, 5, 9], "googl": [4, 5], "com": [4, 5, 9], "spreadsheet": [4, 5], "d": [4, 5, 9], "1ljrfhq6qb36u0tuoxqxcv4_dsqur0x4uimz4qhr8f9m": [4, 5], "edit": [4, 5], "gid": [4, 5], "0": [4, 5, 6, 7, 8, 9, 10, 11, 12, 13], "out": [4, 5, 7, 16], "cfg": 4, "dict": [4, 6, 7, 9, 10, 11, 12], "vars_mli": [4, 5], "state_t": [4, 5], "state_q0001": [4, 5, 7], "state_p": [4, 5, 7, 9], "pbuf_solin": [4, 5], "pbuf_lhflx": [4, 5, 7], "pbuf_shflx": [4, 5], "vars_mlo": [4, 5, 9], "cam_out_netsw": [4, 5, 9, 13], "cam_out_flwd": [4, 5, 9, 13], "cam_out_precsc": [4, 5, 9, 13], "cam_out_precc": [4, 5, 7, 9, 13], "cam_out_sol": [4, 5, 9, 13], "cam_out_solsd": [4, 5, 9, 13], "cam_out_solld": [4, 5, 9, 13], "ref": [4, 5, 9], "www": [4, 5], "noahbrenowitz": [4, 5], "post": [4, 5], "loading_netcdf": [4, 5], "org": [4, 5], "api_doc": [4, 5], "class": 4, "e3smdataset": 4, "def": [4, 5, 7, 9, 13], "__init__": [4, 9, 13], "self": [4, 13], "verbos": 4, "fals": [4, 5, 6, 9, 10, 11, 13], "mli_mean": [4, 5, 9], "open_dataset": [4, 5, 6, 7, 9, 10, 11, 12, 13], "norm_factor": [4, 5, 9], "mli_min": [4, 5, 9], "mli_max": [4, 5, 9], "mlo_scal": [4, 5, 9], "init": 4, "shape": [4, 5, 6, 9], "in_out_shap": 4, "flatten_layers_and_vars_1d": 4, "ds": [4, 5, 9], "dso": [4, 5], "concaten": [4, 5, 6], "all": [4, 8, 9, 14, 16], "batch": [4, 5], "124": [4, 5, 9], "128": [4, 5, 6, 9], "stack": [4, 5], "to_stacked_arrai": [4, 5, 9], "mlvar": [4, 5], "sample_dim": [4, 5, 9], "name": [4, 5, 6, 13], "return": [4, 5, 7, 9, 13], "pad_and_stack_layers_and_vars_1d": 4, "pad": [4, 9], "n_vertical_level": 4, "n_variabl": 4, "e": [4, 5, 6, 7, 8, 9], "g": [4, 6, 7, 9, 10, 11], "60": [4, 5, 8, 9], "6": [4, 5, 8, 9, 10, 12], "arg": 4, "arr": 4, "dataarrai": [4, 7, 9], "arro": 4, "broadcast": [4, 16], "repeat": [4, 5, 6], "across": [4, 10], "to_arrai": 4, "transpos": [4, 6, 7, 9, 10, 11], "load_nc_dir_with_gener": [4, 5], "filelist": [4, 5], "f_mli": [4, 5], "engin": [4, 5, 9, 13], "netcdf4": [4, 5, 9, 13], "dim": [4, 7, 9, 13], "in_shap": 4, "none": [4, 5, 9, 12], "out_shap": 4, "els": [4, 6, 9, 11], "gener": [4, 5, 9], "function": [4, 5, 8], "gen": [4, 5], "read": [4, 5, 9], "varial": [4, 5], "1200": [4, 5, 7], "t": [4, 5, 6, 7, 9, 15], "tendenc": [4, 5, 15], "k": [4, 5, 9, 15], "q": [4, 5, 9, 15], "kg": [4, 5, 7, 9, 15], "yield": [4, 5], "valu": [4, 5, 6, 7, 9, 11, 13], "from_gener": [4, 5], "output_typ": [4, 5], "float64": [4, 5, 9], "output_shap": [4, 5], "size": [4, 5, 9, 12], "dimens": [4, 5, 9, 15, 16], "1hgfzzjm0sygjwvsaj5ksfql9axufkvlybl36p": [4, 5], "vmdzc": [4, 5], "pathlib": 4, "path": [4, 5, 6, 9, 10, 11, 12], "get_filenam": 4, "dataroot": 4, "stride_sampl": [4, 10, 12], "rel": [4, 7], "wildcard": 4, "int": [4, 5, 9], "pick": 4, "everi": [4, 5], "nth": 4, "filepath": [4, 5], "extend": [4, 9], "str": [4, 9], "sort": [4, 5, 9], "f_mli1": [4, 5], "f_mli2": [4, 5], "comment": 4, "seem": 4, "unecessari": 4, "shuffl": [4, 5], "72": [4, 5, 8, 9], "debug": [4, 5], "unnecessari": 4, "twice": 4, "micro_sampl": 4, "todo": 4, "ritwik": 4, "sure": [4, 9], "correct": [4, 9], "split": [4, 5, 9], "filenames_train": 4, "000": [4, 5], "1234567": 4, "0008": [4, 10, 12], "01": [4, 5, 10, 12], "filenames_v": 4, "23456789": [4, 5, 10, 12], "012": [4, 5, 10, 12], "0009": [4, 10, 12], "f_mli_val": [4, 5], "which": [4, 9, 12, 16], "shuffle_buff": [4, 5], "12": [4, 5, 7, 8, 9], "come": [4, 7], "batch_siz": [4, 5], "float": 4, "4": [4, 5, 8, 10, 16], "96": [4, 5, 8], "presum": 4, "number": [4, 9], "doubl": 4, "unbatch": [4, 5], "prefetch": [4, 5], "sens": 4, "them": [4, 5], "couldn": 4, "anyth": 4, "wrong": 4, "don": 4, "fulli": 4, "understand": 4, "should": [4, 9], "randomli": 4, "td": [4, 5], "buffer_s": [4, 5], "reshuffle_each_iter": [4, 5], "relat": 4, "tds_val": [4, 5], "count_batch": [4, 5], "take": [4, 5], "nfile": [4, 5], "next": [4, 7], "iter": 4, "var": [4, 5, 7, 9, 10, 13], "reduce_min": 4, "reduce_max": 4, "assum": [4, 7], "posit": [4, 7], "3840": 4, "08": [4, 6, 11, 12], "059325": 4, "common_runtim": [4, 5], "executor": 4, "1197": 4, "info": [4, 5, 6, 9, 10, 11, 12, 13], "start": [4, 9], "abort": 4, "an": [4, 9, 16], "error": [4, 7, 8], "you": [4, 5, 9, 14, 16], "messag": [4, 9], "invalid_argu": 4, "must": 4, "feed": 4, "placehold": 4, "tensor": 4, "_0": 4, "dtype": 4, "int32": 4, "node": [4, 5], "061563": 4, "0254011839104458": 4, "1109701538780046": 4, "3392385424469184": 4, "distribut": [4, 5, 9], "mirroredstrategi": [4, 5], "strategi": [4, 5], "speed": [4, 5], "up": [4, 5], "process": [4, 5, 13], "possibl": [4, 5], "due": [4, 5, 9], "current": [4, 5, 13], "sequenti": [4, 5], "scope": [4, 5], "param": [4, 5], "input_length": [4, 5], "output_length_lin": [4, 5], "output_length_relu": [4, 5], "8": [4, 5, 6, 8, 11, 13], "output_length": [4, 5], "n_node": [4, 5], "512": [4, 5], "constrcut": [4, 5], "input_lay": [4, 5], "hidden_0": [4, 5], "dens": [4, 5], "relu": [4, 5], "hidden_1": [4, 5], "output_pr": [4, 5], "elu": [4, 5], "output_lin": [4, 5], "linear": [4, 5], "output_relu": [4, 5], "output_lay": [4, 5], "emul": [4, 5], "summari": [4, 5], "adam": [4, 5], "learning_r": [4, 5], "clr": [4, 5], "loss": [4, 5], "mse": [4, 5, 9], "mae": [4, 5, 6, 8, 11, 13], "accuraci": [4, 5], "__________________________________________________________________________________________________": [4, 5], "type": [4, 5, 13], "connect": [4, 5], "inputlay": [4, 5], "64000": [4, 5], "dense_1": [4, 5], "262656": [4, 5], "dense_2": [4, 5], "65664": [4, 5], "dense_3": [4, 5], "120": [4, 5, 9], "15480": [4, 5], "dense_4": [4, 5], "1032": [4, 5], "408": [4, 5], "832": [4, 5], "trainabl": [4, 5], "non": [4, 5], "flatten": [4, 9], "dropout": 4, "conv1d": 4, "maxpooling1d": 4, "init_cnn": 4, "n_vertical_var": 4, "channel_dim": 4, "32": [4, 5, 9, 10], "kernel": [4, 5], "gelu": 4, "pre_out_activ": 4, "norm": [4, 9], "resnet": 4, "style": 4, "1d": 4, "treat": [4, 16], "spatial": [4, 9], "residu": 4, "block": 4, "conv": 4, "special": 4, "norm_lay": 4, "get_normalization_lay": 4, "length": [4, 9], "match": 4, "1st": 4, "argument": 4, "set": [4, 5, 16], "asid": 4, "previous_block_activ": 4, "filter": 4, "kernel_s": 4, "zip": [4, 6, 10, 11, 12, 13], "appli": 4, "zero": [4, 6, 9, 11, 12], "add": [4, 6, 9], "se_block": 4, "project": [4, 6, 9, 10, 11, 12, 13], "stride": 4, "back": [4, 9], "anoth": 4, "last": [4, 9, 13], "particular": 4, "axi": [4, 5, 6, 9, 11, 12], "given": 4, "string": [4, 6, 9, 10, 11], "hard": [4, 7], "layer_norm": 4, "layernorm": 4, "elif": [4, 9], "batch_norm": 4, "batchnorm": 4, "rid": 4, "hardcod": 4, "64": [4, 8], "256": 4, "featur": [4, 6, 9], "determin": [4, 8], "Is": 4, "either": 4, "entri": [4, 9], "intern": 4, "right": [4, 6, 7, 9, 11], "befor": 4, "Not": 4, "why": 4, "lr": 4, "001": [4, 8], "epsilon": 4, "1e": [4, 9], "small": 4, "constant": [4, 7], "numer": 4, "stabil": 4, "default": 4, "07": [4, 6, 9, 11], "But": 4, "mention": 4, "weight_decai": 4, "probabl": [4, 8, 16], "schedul": 4, "tfa": 4, "cyclicallearningr": 4, "initial_learning_r": 4, "init_lr": 4, "maximal_learning_r": 4, "max_lr": 4, "scale_fn": 4, "lambda": 4, "step_siz": 4, "steps_per_epoch": 4, "scale_mod": 4, "cycl": 4, "input_1": 4, "992": 4, "conv1d_1": 4, "5152": 4, "activation_1": 4, "dropout_1": 4, "conv1d_2": 4, "224": [4, 8], "conv1d_3": 4, "10304": 4, "activation_2": 4, "dropout_2": 4, "conv1d_4": 4, "20544": 4, "activation_3": 4, "dropout_3": 4, "conv1d_5": 4, "2112": 4, "add_1": 4, "conv1d_6": 4, "41088": 4, "activation_4": 4, "dropout_4": 4, "conv1d_7": 4, "82048": 4, "activation_5": 4, "dropout_5": 4, "conv1d_8": 4, "8320": 4, "add_2": 4, "conv1d_9": 4, "164096": 4, "activation_6": 4, "dropout_6": 4, "conv1d_10": 4, "327936": 4, "activation_7": 4, "dropout_7": 4, "conv1d_11": 4, "33024": 4, "add_3": 4, "conv1d_12": 4, "2570": 4, "dense_5": 4, "22": [4, 8], "dense_6": 4, "88": [4, 8], "concatenate_1": 4, "698": 4, "520": 4, "callback": [4, 5], "tensorboard": [4, 5], "tboard_callback": [4, 5], "log_dir": [4, 5], "logs_tensorboard": [4, 5], "histogram_freq": [4, 5], "b": [4, 5, 9], "checkpoint": [4, 5], "filepath_checkpoint": [4, 5], "saved_model": [4, 5], "best_model_proto": [4, 5], "h5": [4, 5, 9, 10, 11, 12], "checkpoint_callback": [4, 5], "modelcheckpoint": [4, 5], "save_weights_onli": [4, 5], "monitor": [4, 5], "val_ms": [4, 5], "mode": [4, 5], "min": [4, 5, 9, 13], "save_best_onli": [4, 5], "c": [4, 5, 7, 9, 13], "csv": [4, 5], "logger": [4, 5], "filepath_csv": [4, 5], "csv_logger": [4, 5], "txt": [4, 5], "csv_callback": [4, 5], "csvlogger": [4, 5], "separ": [4, 5, 8, 9, 12, 16], "append": [4, 5, 13], "my_callback": [4, 5], "mkdir": [4, 5], "n_epoch": [4, 5], "40": [4, 8], "fit": [4, 5], "validation_data": [4, 5], "epoch": [4, 5], "136165": 4, "137648": 4, "unknown": [4, 5], "27": [4, 5, 6, 8], "491m": 4, "step": [4, 5, 7, 9, 16], "1615": 4, "1982": 4, "7801": 4, "39": 4, "919740": 4, "920500": 4, "best": [4, 6, 9, 10, 11, 12], "onli": [4, 5, 7, 13], "skip": 4, "29": [4, 9, 11], "542m": 4, "eta": 4, "0s": 4, "0552": 4, "1205": 4, "9368warn": 4, "415m": 4, "9368": 4, "0471": 4, "1050": 4, "9433warn": 4, "422m": 4, "9433": 4, "0449": 4, "1025": 4, "9452warn": 4, "430m": 4, "9452": 4, "0450": 4, "9467warn": 4, "23": [4, 8, 9, 12], "577m": 4, "9467": 4, "0435": 4, "1010": 4, "9454warn": 4, "432m": 4, "9454": 4, "0417": 4, "0978": 4, "9492warn": 4, "402m": 4, "9492": 4, "0414": 4, "0992": 4, "9480warn": 4, "16": [4, 12], "388m": 4, "9480": 4, "0390": 4, "0944": 4, "9506warn": 4, "396m": 4, "9506": 4, "0393": 4, "0949": 4, "9521warn": 4, "383m": 4, "9521": 4, "0384": 4, "0939": 4, "409m": 4, "0375": 4, "0930": 4, "9483warn": 4, "412m": 4, "9483": 4, "13": [4, 5, 8, 9], "0371": 4, "0928": 4, "9500warn": 4, "395m": 4, "9500": 4, "14": [4, 6, 7, 8, 11, 13], "0364": 4, "0913": 4, "9523warn": 4, "421m": 4, "9523": 4, "15": [4, 5, 8, 9], "0352": 4, "0899": 4, "9508warn": 4, "424m": 4, "9508": 4, "0338": 4, "0867": 4, "19": [4, 5, 8], "469m": 4, "0337": 4, "0877": 4, "9538warn": 4, "715m": 4, "9538": 4, "0331": 4, "0862": 4, "9530warn": 4, "509m": 4, "9530": 4, "0315": 4, "0837": 4, "9536warn": 4, "475m": 4, "9536": 4, "0308": 4, "0820": 4, "9565warn": 4, "532m": 4, "9565": 4, "0823": 4, "9542warn": 4, "615m": 4, "9542": 4, "0297": 4, "0807": 4, "9579warn": 4, "25": [4, 5, 6, 8, 9, 12], "595m": 4, "9579": 4, "0299": 4, "9513warn": 4, "466m": 4, "9513": 4, "24": 4, "0293": 4, "0803": 4, "9557warn": 4, "479m": 4, "9557": 4, "0289": 4, "0796": 4, "9570warn": 4, "367m": 4, "9570": 4, "0292": 4, "0806": 4, "375m": 4, "0283": 4, "0785": 4, "9541warn": 4, "461m": 4, "9541": 4, "0276": 4, "0771": 4, "9586warn": 4, "493m": 4, "9586": 4, "0236": [4, 5], "0750": 4, "9577warn": 4, "618m": 4, "9577": 4, "30": [4, 5, 8, 11], "0201": 4, "0712": 4, "632m": 4, "31": [4, 8], "0186": 4, "0685": 4, "9568warn": 4, "514m": 4, "9568": 4, "0175": 4, "0668": 4, "598m": 4, "33": [4, 8], "0173": 4, "0658": 4, "9582warn": 4, "551m": 4, "9582": 4, "34": [4, 8, 9], "0167": 4, "0646": 4, "9601warn": 4, "594m": 4, "9601": 4, "35": [4, 5, 6, 8], "0171": 4, "0650": 4, "9544warn": 4, "539m": 4, "9544": 4, "36": [4, 8, 11], "0166": 4, "0647": 4, "9610warn": 4, "515m": 4, "9610": 4, "37": [4, 5, 6, 8, 12], "0156": 4, "0620": 4, "9609warn": 4, "530m": 4, "9609": 4, "0161": 4, "0630": 4, "500m": 4, "0149": 4, "0609": 4, "9602warn": 4, "484m": 4, "9602": 4, "0151": 4, "0614": 4, "9612warn": 4, "442m": 4, "9612": 4, "histori": 4, "0x7f471361dbe0": 4, "old": 4, "loop": [4, 9], "That": 4, "me": 4, "manual": [4, 5], "order": [4, 5, 9], "howev": [4, 5], "slow": [4, 5], "so": [4, 5, 7], "emploi": [4, 5], "n": [4, 5, 7, 9], "load": [4, 7, 13, 15], "again": 4, "nn_epoch": 4, "nshuffle_buff": 4, "nn": 4, "nwhile": 4, "x_true": [4, 5, 9], "y_true": [4, 5, 9], "one": [4, 9], "singl": [4, 9], "y_pred": [4, 5, 9], "tensorshap": 4, "new": [4, 5], "ha": [4, 5, 6, 9, 11], "option": [4, 5], "latlim": [4, 5], "lonlim": [4, 5], "ne4_grid_info": [4, 5], "test_data": [4, 5], "mmf_ne4_grid": [4, 5, 9], "orig": [4, 5, 9], "load_nc_dir_with_generator_test": [4, 5], "999": [4, 5, 8, 9], "merg": [4, 5, 9], "lat": [4, 5, 7, 9, 13], "lon": [4, 5, 7, 9, 13], "drop": [4, 5], "normalizatoin": [4, 5], "One": [4, 5, 9], "snapshot": [4, 5], "10th": [4, 5], "dir_test_sampl": [4, 5], "home": [4, 5, 9], "sungduk": [4, 5, 7, 9], "work": [4, 5, 9], "leap": [4, 5], "mmf_baselin": [4, 5], "0010": [4, 5], "tds_test": [4, 5], "arrai": [4, 5], "defeat": [4, 5], "purpos": [4, 5, 7], "just": [4, 5], "do": [4, 5, 16], "quick": [4, 5], "as_numpy_iter": [4, 5], "107260": 4, "load_model": [4, 5], "fig": [4, 5, 6, 9, 11, 13], "ax": [4, 5, 6, 9, 11, 12, 13], "subplot": [4, 5, 6, 9, 11, 13], "suptitl": [4, 5, 9, 13], "h0": [4, 5], "pcolor": [4, 5, 12], "vmin": [4, 5, 7, 9, 12, 13], "vmax": [4, 5, 7, 9, 12, 13], "set_titl": [4, 5, 6, 9, 11, 13], "set_ylabel": [4, 5, 6, 9, 11], "set_xlabel": [4, 5, 6, 9, 11], "colorbar": [4, 5, 7, 9, 13], "orient": [4, 5], "set_size_inch": [4, 5, 6, 9, 11], "ax_": [4, 5], "h1": [4, 5], "h2": [4, 5], "cmap": [4, 5, 7, 9, 12, 13], "bwr": [4, 5], "mean": [4, 5, 6, 8, 9, 10, 11, 12, 13], "seri": [4, 5], "0001": [4, 7], "12345": [4, 5], "160": [4, 5], "56": [4, 5], "650758": 4, "y_true_mean_t": [4, 5], "y_pred_mean_t": [4, 5], "western": [4, 5], "eq": [4, 5], "pacif": [4, 5], "y_true_mean_q": [4, 5], "y_pred_mean_q": [4, 5], "kvar": [4, 5, 9], "enumer": [4, 5, 9], "y_true_surface_var": [4, 5], "y_pred_surface_var": [4, 5], "601764": 5, "193": 5, "oneapi": 5, "deep": [5, 9], "librari": 5, "onednn": 5, "sse4": 5, "avx": 5, "42": [5, 8], "919495": 5, "xla": 5, "stream_executor": 5, "cuda_driv": 5, "267": [5, 8], "fail": 5, "cuinit": 5, "cuda_error_no_devic": 5, "capabl": 5, "detect": 5, "919558": 5, "cuda_diagnost": 5, "156": 5, "appear": 5, "cori16": 5, "proc": 5, "nvidia": 5, "version": [5, 16], "exist": 5, "pscratch": [5, 7], "sd": [5, 7], "mmf_ne4": 5, "123456": 5, "0007": 5, "realtion": 5, "f_mli3": 5, "89": [5, 9], "val": [5, 6], "15768": 5, "6054912": 5, "017261": 5, "753492": 5, "gpu_devic": 5, "1613": 5, "job": 5, "localhost": 5, "replica": 5, "task": 5, "38250": 5, "memori": 5, "a100": 5, "sxm4": 5, "40gb": 5, "pci": 5, "bu": 5, "id": 5, "0000": 5, "03": [5, 9, 12], "00": [5, 8, 10, 12], "comput": [5, 7, 8], "755102": 5, "756681": 5, "82": [5, 8], "758286": 5, "c1": 5, "864": 5, "331776": 5, "physicaldevic": 5, "device_typ": 5, "element": 5, "583558": 5, "cuda_bla": 5, "630": 5, "tensorfloat": 5, "matrix": 5, "log": [5, 9, 11], "595604": 5, "servic": 5, "173": 5, "0x7f9918018250": 5, "guarante": 5, "595620": 5, "181": 5, "streamexecutor": 5, "595624": 5, "595626": 5, "595629": 5, "600052": 5, "mlir": 5, "dump_mlir_util": 5, "268": 5, "disabl": 5, "crash": 5, "mlir_crash_reproducer_directori": 5, "621958": 5, "nvptx_helper": 5, "libdevic": 5, "cuda_dir": 5, "nvvm": 5, "mai": [5, 12], "runtim": 5, "failur": 5, "program": 5, "routin": 5, "search": 5, "cuda_sdk_lib": 5, "usr": 5, "choos": 5, "xla_gpu_cuda_data_dir": 5, "hlomodul": 5, "debugopt": 5, "most": [5, 13], "app": 5, "xla_flag": 5, "705394": 5, "jit": 5, "xla_compilation_cach": 5, "477": 5, "cluster": 5, "line": [5, 7, 13], "lifetim": 5, "63072": 5, "1096": 5, "17m": 5, "0044": 5, "0254": 5, "9727": 5, "val_loss": 5, "0041": 5, "val_ma": 5, "0244": 5, "val_accuraci": 5, "9762": 5, "1071": 5, "0240": 5, "9761": 5, "0040": 5, "0238": 5, "9766": 5, "1035": 5, "16m": 5, "9769": 5, "0237": 5, "9774": 5, "9773": 5, "0239": 5, "9764": 5, "1033": 5, "0039": 5, "9775": 5, "1046": 5, "0235": 5, "9776": 5, "0234": 5, "9780": 5, "9778": 5, "9784": 5, "9777": 5, "1049": 5, "9782": 5, "1064": 5, "0038": 5, "1073": 5, "9783": 5, "9786": 5, "22445": 5, "357": 5, "360": 5, "plot": [5, 7, 8, 13], "196933": 6, "396448": 6, "tf": [6, 11, 12], "grid_path": [6, 10, 11, 12], "ocean": [6, 10, 11, 12], "atm200007p": [6, 10, 11, 12], "jlin96": [6, 10, 11, 12], "climsim_low": [6, 10, 11, 12, 13], "res_grid": [6, 10, 11, 12, 13], "norm_path": [6, 10, 11, 12], "input_mean": [6, 10, 11, 12], "input_max": [6, 10, 11, 12], "input_min": [6, 10, 11, 12], "output_scal": [6, 10, 11, 12], "v1": [6, 10, 11], "subset": [6, 10, 11, 15], "set_to_v1_var": [6, 10, 11], "chang": 6, "own": 6, "data_path": [6, 10, 12], "neurips_proj": [6, 10, 11, 12], "e3sm_train_npi": [6, 10, 11, 12], "train_input_path": 6, "train_input": [6, 16], "npy": [6, 9, 10, 11, 12, 16], "train_target_path": 6, "train_target": [6, 16], "val_input_path": 6, "val_input": [6, 16], "val_target_path": 6, "val_target": [6, 16], "input_train": 6, "load_npy_fil": [6, 10, 11, 12], "target_train": 6, "input_v": 6, "target_v": 6, "hat": 6, "y": [6, 9, 12, 13], "y_": 6, "const_model": 6, "beta": 6, "x_": 6, "tx_": 6, "ty_": 6, "would": 6, "like": [6, 9, 16], "infer": 6, "respect": 6, "both": [6, 9], "ones": 6, "bias_vector": 6, "mlr_weight": 6, "linalg": 6, "inv": 6, "set_pressure_grid": [6, 10, 11, 12], "data_split": [6, 10, 11, 12], "const_pred_v": 6, "newaxi": 6, "x_val": 6, "bias_vector_v": 6, "mlr_pred_val": 6, "object": 6, "model_nam": [6, 9, 10, 11, 12], "const": 6, "mlr": 6, "pred": [6, 9, 10, 11, 12], "custom": 6, "preds_val": 6, "1441920": 6, "undo": [6, 10, 11], "dp": [6, 7, 9, 10, 11], "area": [6, 10, 11, 13], "cell": [6, 9, 10, 11, 12, 13], "convert": [6, 7, 8, 9, 10, 11], "common": [6, 8, 9, 10, 11], "energi": [6, 8, 10, 11], "reweight_target": [6, 10, 11], "reweight_pr": [6, 10, 11], "metrics_nam": [6, 10, 11], "rmse": [6, 8, 9, 11, 13], "r2": [6, 11, 13], "create_metrics_df": [6, 10, 11], "705": 6, "runtimewarn": [6, 9, 11, 12], "divid": [6, 11, 12], "encount": [6, 9, 11, 12], "r_squar": [6, 11], "sq_diff": [6, 11], "sum": [6, 7, 9, 11, 12], "tss_time": [6, 11], "over": [6, 9, 11], "inlinebackend": [6, 10, 11, 12, 13], "figure_format": [6, 10, 11, 12, 13], "retina": [6, 10, 11, 12, 13], "letter": [6, 10, 11], "ascii_lowercas": [6, 10, 11], "dictionari": [6, 9], "dict_var": [6, 11], "metrics_var_v": 6, "plot_df_byvar": [6, 11], "pd": [6, 9, 10, 11], "datafram": [6, 9, 10, 11], "renam": [6, 7, 9, 10, 11], "var_short_nam": [6, 9, 10, 11], "nrow": [6, 9, 11, 13], "sharex": [6, 9, 11], "bar": [6, 9, 10, 11], "legend": [6, 9, 10, 11], "m": [6, 7, 9, 10, 11, 13, 15], "set_ylim": [6, 9, 11], "set_xticklabel": [6, 9, 11], "rotat": [6, 9, 11], "center": [6, 9, 11, 12], "columnspac": [6, 9, 11], "labelspac": [6, 9, 11], "handleheight": [6, 9, 11], "handlelength": [6, 9, 11], "handletextpad": [6, 9, 11], "borderpad": [6, 9, 11], "loc": [6, 9, 11], "upper": [6, 9, 11], "tight_layout": [6, 9, 11, 13], "If": [6, 14, 16], "differ": [6, 8, 9, 15], "scoring_input_path": 6, "scoring_input": [6, 10, 11, 12, 16], "scoring_target_path": 6, "scoring_target": [6, 10, 11, 12, 16], "input_scor": [6, 10, 11, 12], "target_scor": [6, 10, 11, 12], "const_pred_scor": 6, "x_score": 6, "bias_vector_scor": 6, "mlr_pred_scor": 6, "preds_scor": [6, 10, 11, 12], "1681920": 6, "metrics_var_scor": [6, 10, 11], "demonstr": 7, "summar": 7, "sum_i": 7, "left": [7, 9], "delta": 7, "q_v": 7, "q_l": 7, "q_i": 7, "frac": 7, "p_i": 7, "p": [7, 9], "state_q0002": 7, "state_q0003": 7, "l_v": 7, "datadir": 7, "mmf_ne30": 7, "72000": 7, "begin": 7, "integr": [7, 9], "need": 7, "construct": [7, 9], "thick": [7, 9], "interfac": 7, "a_k": 7, "p_o": 7, "b_k": 7, "p_": 7, "here": [7, 16], "extract": [7, 10, 12], "coeffici": [7, 8, 9], "fix": [7, 13], "dure": 7, "physic": [7, 9], "parameter": 7, "initial_condit": 7, "cf": 7, "cdir": 7, "inputdata": 7, "atm": 7, "cam": 7, "inic": 7, "homm": 7, "eam_i_mam3_linoz_ne30np4_l60_c20210917": 7, "ifac": 7, "hyai": [7, 9], "hybi": [7, 9], "p0": [7, 9], "get_pressure_thick": 7, "ps": [7, 9, 15], "coord": 7, "getpint": 7, "pint": 7, "attr": 7, "updat": [7, 9], "unit": [7, 8, 10, 11, 15], "pa": [7, 15], "long_nam": 7, "dp_temp": 7, "diff": 7, "ilev": [7, 9], "state_pmid": 7, "igrav": 7, "80616": [7, 9], "ci_": 7, "total_wat": 7, "ci_state_q0001": 7, "ci_state_q0002": 7, "ci_state_q0003": 7, "surfac": [7, 9, 15], "flux": [7, 9, 15], "evapotranspir": 7, "precipit": 7, "surface_water_flux": 7, "1e3": 7, "m2": [7, 9], "1000": 7, "expected_wat": 7, "water_error": 7, "water_error_rel": 7, "check": [7, 16], "variou": 7, "map": [7, 13], "look": 7, "geograph": 7, "pattern": 7, "within": [7, 9], "few": 7, "percent": 7, "line2d": 7, "0x7f6a3d1b6150": 7, "figsiz": [7, 9, 13], "scatter": 7, "rdbu_r": 7, "xlabel": [7, 10], "longitud": 7, "ylabel": [7, 10], "latitud": [7, 9], "titl": [7, 10], "mass": [7, 9], "0x7f6a39183c90": 7, "four": 8, "absolut": 8, "r\u00b2": 8, "root": [8, 14, 16], "squar": 8, "continu": [8, 9], "rank": 8, "crp": [8, 9], "comparison": 8, "m\u00b2": [8, 15], "done": 8, "data_util": [8, 16], "longitudin": 8, "averag": [8, 10], "3d": [8, 9], "shown": [8, 15], "below": [8, 15], "dt": [8, 9, 13, 15], "585": 8, "684": 8, "845": 8, "683": 8, "685": 8, "732": 8, "dq": [8, 9, 13, 15], "401": 8, "673": 8, "784": 8, "495": 8, "592": 8, "680": 8, "netsw": [8, 9, 13, 15], "85": 8, "968": 8, "73": 8, "flwd": [8, 9, 13, 15], "598": 8, "894": 8, "018": 8, "588": 8, "precsc": [8, 9, 13, 15], "364": 8, "046": 8, "511": 8, "328": 8, "322": 8, "precc": [8, 9, 13, 15], "83": 8, "250": 8, "46": 8, "81": 8, "sol": [8, 9, 13, 15], "554": 8, "97": [8, 9], "94": 8, "soll": [8, 9, 13, 15], "924": 8, "solsd": [8, 9, 13, 15], "817": 8, "075": 8, "331": 8, "533": 8, "846": 8, "159": 8, "solld": [8, 9, 13, 15], "679": 8, "136": 8, "215": 8, "806": 8, "702": 8, "066": 8, "627": 8, "542": 8, "568": 8, "589": 8, "617": 8, "590": 8, "944": 8, "980": 8, "959": 8, "983": 8, "957": 8, "828": 8, "802": 8, "904": 8, "912": 8, "883": 8, "077": 8, "909": 8, "68": 8, "69": 8, "67": 8, "926": 8, "927": 8, "960": 8, "929": 8, "961": 8, "943": 8, "916": 8, "945": 8, "948": 8, "928": 8, "915": 8, "951": 8, "923": 8, "956": 8, "940": 8, "921": 8, "813": 8, "857": 8, "797": 8, "866": 8, "837": 8, "796": 8, "369": 8, "696": 8, "825": 8, "421": 8, "482": 8, "721": 8, "284": 8, "643": 8, "896": 8, "518": 8, "780": 8, "91": 8, "537": 8, "77": 8, "71": [8, 9], "86": 8, "070": 8, "220": 8, "969": 8, "914": 8, "530": 8, "078": 8, "095": 8, "734": 8, "76": 8, "682": 8, "90": [8, 9], "58": 8, "92": 8, "540": 8, "78": 8, "95": [8, 9, 13], "917": 8, "420": 8, "417": 8, "47": 8, "63": 8, "580": 8, "795": 8, "899": 8, "022": 8, "372": 8, "055": 8, "053": 8, "057": 8, "016": 8, "011": 8, "008": 8, "009": 8, "122": 8, "085": 8, "097": 8, "031": 8, "028": 8, "033": 8, "038": 8, "035": 8, "040": 8, "015": 8, "017": 8, "author": 9, "yu": 9, "tue": 9, "aug": 9, "pm": 9, "pdt": 9, "descript": [9, 15], "three": 9, "manuscript": 9, "crps_clean": 9, "written": 9, "bhouri0412": 9, "In": [9, 13], "presav": 9, "fn_x_true": 9, "fn_y_tru": 9, "fn_y_pr": 9, "predict": [9, 10, 11], "fn_grid": 9, "netcdif": 9, "fn_mli_mean": 9, "fn_mli_min": 9, "fn_mli_max": 9, "max": [9, 13], "fn_mlo_scal": 9, "fn_save_metr": 9, "fn_save_metrics_avg": 9, "avg": 9, "fn_model_output": 9, "model_output": 9, "001_backup_phas": [9, 10, 11, 12], "7_retrained_models_step2_lot": [9, 10, 11, 12], "147_trial_0027": [9, 10, 11, 12], "rpn_pred_v1_stride6": [9, 10, 11, 12], "val_predict_cnn_reshaped_stride6_fin": [9, 10, 11, 12], "hsr_preds_bestcrp": [9, 10, 11, 12], "ed_climsim_1_3_pr": [9, 10, 11, 12], "mlpv1": 9, "npy_data_convers": 9, "npy_fil": 9, "val_input_stride6": 9, "val_target_stride6": 9, "varlid": 9, "fn_save_output": 9, "want": [9, 16], "j": 9, "lv": 9, "rho_h2o": 9, "m3": 9, "constatn": 9, "e3sm_root": 9, "share": [9, 10, 11, 12], "shr_const_mod": 9, "f90": 9, "grav": 9, "acceler": 9, "graviti": 9, "00464e3": 9, "specif": [9, 15], "heat": [9, 10, 15], "dry": 9, "air": [9, 15], "501e6": 9, "latent": [9, 15], "evapor": 9, "lf": 9, "337e5": 9, "fusion": 9, "ls": 9, "sublim": 9, "rho_air": 9, "101325": 9, "02214e26": 9, "38065e": 9, "966": 9, "273": 9, "densiti": 9, "stp": 9, "2923182846924677": 9, "shr_const_pstd": 9, "shr_const_rdair": 9, "shr_const_tkfrz": 9, "shr_const_rga": 9, "shr_const_mwdair": 9, "shr_const_avogad": 9, "shr_const_boltz": 9, "rho_h20": 9, "e3": 9, "fresh": 9, "vars_mlo_energy_conv": 9, "vars_longnam": 9, "moisten": [9, 10, 15], "net": [9, 15], "shortwav": [9, 15], "downward": [9, 15], "longwav": [9, 15], "snow": [9, 15], "rate": [9, 15], "rain": [9, 15], "visibl": [9, 15], "direct": [9, 15], "solar": [9, 15], "Near": [9, 15], "ir": [9, 15], "diffus": [9, 15], "panda": 9, "dimems": 9, "dim_name_level": 9, "dim_name_sampl": 9, "astyp": 9, "n_sampl": 9, "ds_grid": 9, "n_ncol": 9, "nlat": 9, "nlon": 9, "area_wgt": 9, "loayd": 9, "to_xarrai": 9, "tile": 9, "nsampl": 9, "hyam": 9, "hybm": 9, "vars_mlo_len": 9, "len_to_dim": 9, "dev": 9, "en": 9, "stabl": 9, "kd": 9, "format": 9, "kei": 9, "turpl": 9, "ie": 9, "kvar_len": 9, "kvar_dim": 9, "end": 9, "np_arrai": 9, "ind1": 9, "ind2": 9, "kvar_data": 9, "squeez": 9, "unscal": 9, "denorm": 9, "fyi": 9, "hybrid": 9, "sigma": 9, "coordin": [9, 12], "system": 9, "z": 9, "tmp": 9, "isel": 9, "slice": 9, "break": 9, "n_timestep": 9, "dim_ncol": 9, "arang": 9, "dim_timestep": 9, "new_ind": 9, "multiindex": 9, "from_product": 9, "assign_coord": 9, "unstack": 9, "del": 9, "equival": 9, "ds_energi": 9, "keep": [9, 16], "origin": [9, 12], "ptend_": 9, "q0001": 9, "rho": 9, "dz": 9, "all_metr": 9, "A": 9, "after": 9, "have": [9, 14, 16], "rest": 9, "analysi": 9, "desir": 9, "plane": 9, "select": [9, 10, 12], "varibl": 9, "caclul": 9, "ab": 9, "sqrt": 9, "wise": 9, "kmetric": 9, "fn_save": 9, "metrics_netcdf": [9, 13], "_": [9, 13], "to_netcdf": 9, "simpl": [9, 15], "metrics_stack": 9, "ml_out_idx": 9, "output_idx": 9, "to_csv": 9, "002488": 9, "005218": 9, "897846": 9, "004997": 9, "009940": 9, "934334": 9, "008768": 9, "013675": 9, "966718": 9, "014756": 9, "021097": 9, "982648": 9, "023048": 9, "030524": 9, "993642": 9, "123": 9, "333065": 9, "876357": 9, "685671": 9, "970805": 9, "403315": 9, "961380": 9, "125": 9, "299178": 9, "954437": 9, "947612": 9, "126": 9, "533141": 9, "420306": 9, "955713": 9, "127": 9, "806307": 9, "118702": 9, "866159": 9, "row": 9, "Then": 9, "metrics_vert_avg": 9, "remov": 9, "dummi": 9, "to_panda": 9, "682765": 9, "420904": 9, "588987": 9, "494752": 9, "321821": 9, "inf": 9, "360915": 9, "707551": 9, "982684": 9, "224468": 9, "968642": 9, "924299": 9, "683915": 9, "733680": 9, "metric_mlp160": 9, "kmodel": 9, "mlpv2": 9, "csv_path": 9, "metrics_": 9, "top160": 9, "csv_file": 9, "df_list": 9, "read_csv": 9, "kf": 9, "index_col": 9, "concat": 9, "metric_mlp160_stat": 9, "median": 9, "std": 9, "p05": 9, "quantil": 9, "p10": 9, "p25": 9, "p75": 9, "75": 9, "p90": 9, "p95": 9, "nan": 9, "tf_conda": 9, "lib": [9, 13], "python3": [9, 13], "site": [9, 13], "function_bas": 9, "4573": 9, "subtract": 9, "diff_b_a": 9, "without": 9, "metric_mlp160_lev": 9, "metric_mlp160_stat_lev": 9, "requir": 9, "fn_metric": 9, "fn_metrics_stack": 9, "assign": 9, "color": 9, "davidmathlog": 9, "colorblind": 9, "23000000": 9, "23e69f00": 9, "2356b4e9": 9, "23009e73": 9, "23f0e442": 9, "230072b2": 9, "23d55e00": 9, "23cc79a7": 9, "lc_model": 9, "0072b2": 9, "e69f00": 9, "2b2b2b": 9, "882255": 9, "009e73": 9, "d55e00": 9, "56b4e9": 9, "short": 9, "var_idx": 9, "surface_var": 9, "fn_crp": 9, "metrics_crp": 9, "rpn_crp": 9, "cvae_crp": 9, "hsr_crp": 9, "plot_this_model": 9, "plot_this_models_crp": 9, "plot_this_metr": 9, "subpanel": 9, "abc": 9, "abcdefg": 9, "plotdata": 9, "vertical_avg": 9, "plotdata_by_metr": 9, "k_plot_this_model": 9, "_ax": 9, "width": [9, 13], "spread": 9, "errbar_model": 9, "x_off": 9, "plot_x": 9, "plot_m": 9, "plot_low": 9, "plot_upp": 9, "errorbar": 9, "yerr": 9, "capsiz": 9, "lw": 9, "neg": 9, "set_yscal": [9, 11], "savefig": 9, "si_fig_3": 9, "pdf": 9, "tell": 9, "idx_start": 9, "idx_end": 9, "iloc": 9, "isinf": 9, "fill_between": 9, "silver": 9, "zorder": 9, "ylim": 9, "si_fig_4": 9, "si_fig_5": 9, "sw_log": 9, "abbcdefghij": 9, "gridspec_kw": 9, "height_ratio": 9, "gs": 9, "get_gridspec": 9, "underli": 9, "axbig": 9, "add_subplot": 9, "93": 9, "horizontalalign": 9, "verticalalign": 9, "transform": 9, "transax": 9, "fontweight": 9, "demi": 9, "frameon": 9, "bottom": 9, "lot_this_model": 9, "kk": 9, "fig_2": 9, "upto": 9, "cm": 9, "mpl_toolkit": [9, 13], "axes_grid1": 9, "imagegrid": 9, "sklearn": 9, "r2_score": 9, "ds_hist": 9, "fn_y": 9, "fn_x": 9, "plot_hexbin": 9, "klev": 9, "xmin": 9, "xmax": 9, "ymin": 9, "ymax": 9, "fn_fig": 9, "imgrid": 9, "111": 9, "similar": 9, "nrows_ncol": 9, "2x2": 9, "axes_pad": 9, "between": 9, "inch": 9, "cbar_mod": 9, "cbar_loc": 9, "cbar_pad": 9, "aspect": 9, "panel_id": 9, "plotx": 9, "ploti": 9, "plotrms": 9, "plotr2": 9, "sample_weight": 9, "multioutput": 9, "uniform_averag": 9, "h": 9, "hexbin": 9, "gridsiz": 9, "50": 9, "extent": 9, "bin": 9, "mincnt": 9, "viridi": [9, 13], "alpha": 9, "axlin": 9, "slope": 9, "linewidth": [9, 13], "set_facecolor": 9, "efefef": 9, "set_xlim": 9, "prop": 9, "boxstyl": 9, "round": [9, 13], "facecolor": 9, "wheat": 9, "nr2": 9, "2f": 9, "nrmse": 9, "va": 9, "bbox": 9, "fontsiz": [9, 13], "2e": 9, "3f": 9, "cb": [9, 13], "cbar_ax": 9, "set_label": 9, "count": 9, "55": 9, "si_scatter_": 9, "si_scatter_dtdt": 9, "57": 9, "0045": 9, "si_scatter_dqdt": 9, "0095": 9, "cartopi": 9, "cr": 9, "ccr": 9, "cfeatur": 9, "pyproj": 9, "userwarn": [9, 12], "unabl": 9, "databas": 9, "_pyproj_global_context_initi": 9, "fn_data": 9, "mlp_mae": 9, "plot_metric_map": 9, "jet": 9, "clev": 9, "defin": 9, "subplot_kw": 9, "robinson": 9, "central_longitud": 9, "179": 9, "dimension": 9, "geoax": 9, "set_glob": 9, "ds_plotdata": 9, "clevel": 9, "linspac": 9, "tricontourf": [9, 13], "platecarre": 9, "set_und": 9, "set_clim": 9, "contour": 9, "cs": 9, "contourf": 9, "coolwarm": 9, "coastlin": 9, "025": [9, 13], "087": 9, "subplots_adjust": 9, "add_ax": [9, 13], "925": 9, "145": 9, "020": 9, "cax": [9, 13], "tick": 9, "si_2d": 9, "map_r2_": 9, "turbo": 9, "dtdt": 9, "dqdt": 9, "input_path": [10, 11], "target_path": [10, 11], "cvae_pred_path": [10, 11, 12], "final_metr": [10, 11, 12], "cvae_preds_manu": [10, 11, 12], "ed_pred_path": [10, 11, 12], "behren": [10, 11, 12], "ed_behrens_2022": [10, 11, 12], "hsr_pred_path": [10, 11, 12], "rpn_pred_path": [10, 11, 12], "figure_ingredi": [10, 11, 12], "cnn_pred_path": [10, 11, 12], "mlp_pred_path": [10, 11, 12], "load_path": [10, 11, 12], "load_h5_fil": [10, 11, 12], "results_complet": 10, "results_temp": 10, "target_var": 10, "calc_bia": 10, "preds_weighted_scor": 10, "target_weighted_scor": 10, "avg_grid": 10, "e3sm_train": [10, 12], "regular": [10, 12], "express": [10, 12], "set_regexp": [10, 12], "regexp": [10, 12], "tempor": [10, 12], "set_stride_sampl": [10, 12], "set_filelist": [10, 12], "pressure_grid_plot": [10, 12], "get_pressure_grid_plot": [10, 12], "y_pressur": 10, "4380": [10, 12], "135": 10, "51it": 10, "xlim": 10, "gca": 10, "invert_yaxi": 10, "hpa": 10, "bia": 10, "text": 10, "bias_df": 10, "941637": 11, "922437": 11, "649": 11, "dict_idx": 11, "metrics_idx_scor": 11, "644365": 12, "53": 12, "040170": 12, "scoring_data": 12, "input_scoring_path": 12, "target_scoring_path": 12, "weight": 12, "scoring_data_copi": 12, "deepcopi": 12, "72it": 12, "part": 12, "preds_copi": 12, "plot_r2_analysi": 12, "792": 12, "interpret": 12, "increas": 12, "lead": 12, "incorrectli": 12, "edg": 12, "case": 12, "pleas": [12, 14], "suppli": 12, "explicit": 12, "contour_plot": 12, "coeff": 12, "blue": 12, "pcolormesh": 12, "799": 12, "pred_moist_daily_long": 12, "test_moist_daily_long": 12, "803": 12, "640x480": 12, "basemap": 13, "filterwarn": 13, "metricv": 13, "vardict": 13, "varnam": 13, "item": 13, "flat": 13, "robin": 13, "lon_0": 13, "165": 13, "drawcoastlin": 13, "rect": 13, "975": 13, "show": 13, "keyboardinterrupt": 13, "traceback": 13, "recent": 13, "miniconda": 13, "1133": 13, "llcrnrlon": 13, "llcrnrlat": 13, "urcrnrlon": 13, "urcrnrlat": 13, "llcrnrx": 13, "llcrnry": 13, "urcrnrx": 13, "urcrnri": 13, "height": 13, "area_thresh": 13, "rsphere": 13, "ellp": 13, "lat_t": 13, "lat_1": 13, "lat_2": 13, "lat_0": 13, "lon_1": 13, "lon_2": 13, "o_lon_p": 13, "o_lat_p": 13, "k_0": 13, "no_rot": 13, "suppress_tick": 13, "satellite_height": 13, "boundinglat": 13, "fix_aspect": 13, "anchor": 13, "celesti": 13, "epsg": 13, "1130": 13, "coastpolygon": 13, "1131": 13, "coastseg": 13, "segment": 13, "instead": 13, "polygon": 13, "1132": 13, "_readboundarydata": 13, "gshh": 13, "as_polygon": 13, "1134": 13, "sg": 13, "1135": 13, "geo": 13, "structur": 13, "land": 13, "1136": 13, "is_land": 13, "method": [13, 16], "1400": 13, "1397": 13, "poli": 13, "is_valid": 13, "1398": 13, "instersect": 13, "1399": 13, "region": 13, "intersect": 13, "boundarypolyl": 13, "1401": 13, "1402": 13, "geom": 13, "repo": [14, 16], "pip": [14, 16], "alreadi": [14, 16], "etc": [14, 16], "altern": [14, 16], "dep": [14, 16], "six": 15, "describ": 15, "pre": 15, "temperatur": 15, "humid": 15, "solin": 15, "insol": 15, "lhflx": 15, "shflx": 15, "sensibl": 15, "held": 16, "upcom": 16, "onlin": 16, "competit": 16, "ey": 16, "someth": 16, "channel": 16, "main_figure_gener": 16, "see": 16, "calc_ma": 16, "calc_rms": 16, "calc_r2": 16, "point": 16, "estim": 16, "calc_crp": 16, "calibr": 16}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"project": [0, 2], "structur": [0, 2], "contributor": 1, "guidelin": 1, "feedback": 1, "futur": 1, "develop": [1, 4], "guid": 1, "websit": 1, "how": 1, "build": [1, 4, 5], "local": 1, "climsim": [2, 9], "an": 2, "open": 2, "larg": 2, "scale": [2, 9], "dataset": [2, 3, 4, 5, 9], "train": [2, 4, 5, 6], "high": 2, "resolut": 2, "physic": 2, "emul": 2, "hybrid": 2, "multi": [2, 5], "climat": 2, "simul": 2, "get": [2, 4, 10], "start": 2, "model": [2, 6, 9, 15], "evalu": [2, 6, 8, 11], "demo": 2, "notebook": 2, "refer": 2, "inform": 3, "convolut": 4, "neural": 4, "network": 4, "cnn": 4, "exampl": [4, 5, 7], "data": [4, 5, 6, 10, 11, 12], "pipelin": [4, 5], "input": [4, 5, 9], "output": [4, 5, 9, 10, 11], "variabl": [4, 5, 9], "list": [4, 5], "defin": 4, "tf": [4, 5], "instanti": [4, 5, 6, 10, 11, 12], "object": [4, 5], "here": [4, 5, 6, 9], "val": 4, "filenam": 4, "loader": 4, "plot": [4, 6, 9, 10, 11, 12], "some": 4, "statist": 4, "ml": [4, 5], "fcnn": 4, "visual": [4, 9], "predict": [4, 6, 12], "saniti": [4, 5], "check": [4, 5, 9], "layer": 5, "perceptron": 5, "mlp": [5, 9], "import": [6, 10, 11, 12], "data_util": [6, 10, 11, 12], "class": [6, 10, 11, 12], "load": [6, 9, 10, 11, 12], "valid": 6, "constant": 6, "multipl": 6, "linear": 6, "regress": 6, "ad": 6, "bia": 6, "unit": [6, 9], "creat": [6, 11], "your": 6, "set": [6, 9, 10, 11, 12], "pressur": [6, 10, 11, 12], "grid": [6, 10, 11, 12], "weight": [6, 9, 10, 11], "target": 6, "calcul": [6, 9, 10], "metric": [6, 9, 11], "score": 6, "do": 6, "thi": [6, 9], "veri": 6, "end": 6, "when": 6, "you": 6, "have": 6, "finish": 6, "tune": [6, 9], "hyperparamet": 6, "ar": 6, "seek": 6, "final": 6, "water": 7, "conserv": 7, "part": 9, "1": [9, 11], "save": 9, "them": 9, "csv": 9, "file": 9, "chang": 9, "name": 9, "user": 9, "onli": 9, "energi": 9, "convers": 9, "factor": 9, "main": 9, "pack": 9, "np": 9, "arrai": 9, "xarrai": 9, "area": 9, "vertic": 9, "2": 9, "base": 9, "global": 9, "averag": 9, "perform": 9, "varianc": 9, "across": 9, "top": 9, "160": 9, "out": 9, "8": 9, "000": 9, "trial": 9, "pre": 9, "make": [9, 10], "figur": 9, "intercomparison": 9, "level": 9, "aggreg": 9, "includ": 9, "text": 9, "profil": 9, "tendenc": [9, 12], "si": 9, "3": 9, "togeth": 9, "mae": 9, "r2": [9, 12], "4": 9, "scatter": 9, "5": 9, "2d": 9, "map": 9, "bias": 10, "axi": 10, "skill": 12, "temperatur": 12, "specif": 12, "humid": 12, "packag": 12, "py": 12, "latitud": 12, "analysi": 12, "code": 14, "instal": 14, "baselin": 15, "quickstart": 16}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx": 56}})