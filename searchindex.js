Search.setIndex({"docnames": ["ARCHITECTURE", "CONTRIBUTING", "README", "dataset", "demo_notebooks/quickstart_example", "demo_notebooks/water_conservation", "evaluating", "evaluation/ClimSim_metrics", "evaluation/bias_calculation", "evaluation/crps_correction", "evaluation/main_figure_generation", "evaluation/plot_R2_analysis", "figures/climsim_figures", "installation", "models", "quickstart"], "filenames": ["ARCHITECTURE.md", "CONTRIBUTING.md", "README.md", "dataset.md", "demo_notebooks/quickstart_example.ipynb", "demo_notebooks/water_conservation.ipynb", "evaluating.md", "evaluation/ClimSim_metrics.ipynb", "evaluation/bias_calculation.ipynb", "evaluation/crps_correction.ipynb", "evaluation/main_figure_generation.ipynb", "evaluation/plot_R2_analysis.ipynb", "figures/climsim_figures.ipynb", "installation.md", "models.md", "quickstart.md"], "titles": ["Project structure", "Contributor Guidelines", "ClimSim: An open large-scale dataset for training high-resolution physics emulators in hybrid multi-scale climate simulators", "Dataset Information", "Import data_utils", "Water Conservation Example", "Evaluation", "ClimSim: Metrics calculation and visualization", "Import data_utils", "Importing packages and data_utils.py", "Evaluation metrics", "Prediction skill of temperature and specific humidity tendencies", "&lt;no title&gt;", "Code Installation", "Baseline Models", "Quickstart"], "terms": {"github": [0, 1, 2, 6, 14, 15], "action": [0, 1], "workflow": 0, "baseline_model": [0, 14], "pretrain": 0, "baselin": [0, 2, 6, 9], "model": [0, 3, 5, 6, 8, 9, 10, 11, 12, 15], "well": [0, 14, 15], "python": [0, 7, 12, 13, 15], "script": [0, 7, 15], "depend": [0, 13, 15], "re": 0, "train": [0, 3, 5, 14, 15], "cnn": [0, 2, 6, 7, 8, 10, 11, 12, 14, 15], "convolut": [0, 2, 14], "neural": [0, 2, 14], "network": [0, 2, 14], "ed": [0, 6, 7, 8, 10, 11, 12, 14], "encod": [0, 14], "decod": [0, 14], "hsr": [0, 6, 7, 8, 9, 10, 11, 12, 14], "heteroskedast": [0, 14], "regress": [0, 2, 14], "mlp": [0, 2, 6, 8, 10, 11, 12, 14], "multilay": 0, "perceptron": [0, 2, 14], "rpn": [0, 6, 7, 8, 9, 10, 11, 12, 14], "random": [0, 9, 14], "prior": [0, 14], "cvae": [0, 6, 7, 8, 9, 10, 11, 12, 14], "condit": [0, 5, 14], "variat": [0, 14], "autoencod": [0, 14], "climsim_util": [0, 4, 6, 8, 9, 10, 11, 13, 15], "instal": [0, 2, 15], "packag": [0, 7, 12], "data": [0, 2, 3, 7, 12, 15], "preprocess": [0, 3, 4, 8, 9, 10, 13, 15], "evalu": [0, 1, 7, 13, 15], "dataset_statist": 0, "precomput": 0, "statist": 0, "input": [0, 2, 3, 4, 5, 8, 9, 10, 11, 14], "output": [0, 2, 3, 4, 5, 9, 11], "variabl": [0, 3, 4, 6, 8, 9, 10, 14, 15], "dataset": [0, 14, 15], "demo_notebook": [0, 1], "jupyt": [0, 1, 14], "notebook": [0, 1, 3, 4, 5, 6, 14, 15], "exampl": [0, 2], "how": [0, 14, 15], "us": [0, 1, 2, 3, 4, 6, 7, 10, 11, 12, 14, 15], "ml": [0, 2, 5, 7], "grid_info": [0, 4, 7, 8, 9, 10, 11], "grid": [0, 3, 7, 12], "inform": [0, 2, 7], "low": [0, 3, 14, 15], "resolut": [0, 3, 12, 14, 15], "normal": [0, 4, 7, 8, 9, 10, 11], "factor": [0, 5], "test": [0, 12, 15], "ani": 0, "kind": 0, "websit": 0, "document": [0, 12], "gitignor": 0, "list": [0, 3, 7, 8, 11], "file": [0, 1, 2, 3, 4, 5, 8, 9, 11, 12], "ignor": [0, 12], "git": 0, "licens": [0, 2], "setup": 0, "py": [0, 4, 6, 7, 10, 12, 15], "readm": [0, 1], "md": [0, 1], "addit": [1, 15], "issu": 1, "from": [1, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 15], "commun": 1, "research": [1, 2], "wish": [1, 15], "off": 1, "climsim": [1, 3, 4, 8, 9, 10, 11, 15], "make": [1, 5, 11], "our": [1, 14, 15], "tool": [1, 13, 15], "ar": [1, 2, 3, 5, 6, 7, 11, 14, 15], "welcom": 1, "can": [1, 2, 3, 5, 13, 15], "rais": 1, "page": 1, "prefer": 1, "directli": 1, "email": 1, "maintain": 1, "i": [1, 2, 3, 4, 5, 6, 9, 10, 11, 14, 15], "built": 1, "book": [1, 9], "To": [1, 4, 9, 10, 11], "mimic": 1, "what": 1, "doe": [1, 15], "first": [1, 7, 15], "copi": [1, 7, 11], "demo": 1, "directori": [1, 2], "cd": 1, "cp": [1, 7], "r": 1, "architectur": 1, "figur": [1, 4, 5, 9, 11], "creat": [1, 7, 8, 9, 11, 12, 14], "conda": [1, 7], "environ": [1, 13, 14, 15], "env": [1, 7, 12], "f": [1, 4, 7, 9, 10, 12], "yml": 1, "activ": 1, "doc": [1, 7], "run": [1, 3, 7, 13, 15], "follow": [1, 4, 5, 9, 10, 11, 13, 15], "command": 1, "The": [1, 2, 3, 4, 5, 6, 7, 11, 14, 15], "html": [1, 7], "content": 1, "folder": [1, 4, 6, 14], "call": [1, 12], "_build": 1, "view": 1, "open": 1, "index": [1, 4, 7, 8, 9, 10], "browser": 1, "largest": 2, "ever": 2, "design": 2, "It": [2, 15], "compris": 2, "develop": 2, "consortium": 2, "scientist": 2, "consist": 2, "5": [2, 3, 4, 6, 8, 9, 10, 12], "7": [2, 3, 4, 6, 7, 9, 10, 12], "billion": [2, 3], "pair": 2, "multivari": 2, "vector": [2, 15], "isol": 2, "influenc": 2, "local": [2, 13, 15], "nest": 2, "fidel": 2, "host": 2, "": [2, 5, 7, 8, 11, 14, 15], "macro": 2, "state": 2, "global": [2, 5], "coverag": 2, "span": 2, "multipl": [2, 9], "year": [2, 3], "sampl": [2, 3, 7], "frequenc": 2, "result": [2, 7], "compat": 2, "downstream": 2, "coupl": 2, "oper": [2, 4, 9, 10, 11], "we": [2, 5, 7, 15], "implement": 2, "rang": [2, 4, 7, 9, 10], "determinist": 2, "stochast": [2, 15], "highlight": 2, "challeng": 2, "score": [2, 6, 7, 8, 10, 11, 15], "quickstart": [2, 3], "code": [2, 5, 14, 15], "layer": [2, 14], "water": [2, 7], "conserv": 2, "repositori": 2, "paper": [2, 3, 15], "record": 2, "neurip": 2, "2023": [2, 4, 7, 10, 11, 15], "talk": 2, "contributor": 2, "guid": 2, "apach": 2, "2": [2, 3, 4, 6, 8, 9, 10, 11, 12, 15], "0": [2, 4, 5, 6, 7, 8, 9, 10, 11, 12], "found": [2, 3, 6, 14, 15], "associ": 2, "repo": [2, 13, 15], "creativ": 2, "common": [2, 4, 6, 7, 8, 10], "attribut": 2, "4": [2, 6, 8, 9, 15], "huggingfac": 2, "top": [2, 9], "level": [2, 3, 4, 5, 8, 9, 10, 12], "multi": [3, 14], "scale": [3, 4, 8, 9, 10], "climat": 3, "e3sm": [3, 5, 7, 8, 11], "mmf": [3, 5, 8, 11], "simul": 3, "were": [3, 4, 6, 14], "save": [3, 9], "20": [3, 6, 9], "minut": 3, "interv": 3, "10": [3, 6, 7, 9, 12], "two": 3, "netcdf": [3, 7], "target": [3, 6, 8, 9, 10, 11, 14], "produc": 3, "each": [3, 4, 5, 6, 7, 8, 9, 10, 14], "timestep": 3, "total": 3, "525": 3, "600": 3, "configur": 3, "3": [3, 4, 6, 9, 10, 12, 15], "download": [3, 12, 15], "hug": [3, 5], "face": 3, "high": 3, "real": [3, 14, 15], "geographi": [3, 14, 15], "1": [3, 4, 5, 8, 9, 11, 12, 15], "x": [3, 4, 7, 8, 9, 10, 11, 12, 14], "horizont": [3, 4, 6, 7, 8, 9, 10], "21": [3, 6, 7, 10, 11, 12], "column": [3, 4, 5, 7, 8, 10], "41": 3, "tb": 3, "102": 3, "mb": 3, "per": [3, 7], "61": [3, 6, 7], "11": [3, 6, 7, 9], "384": [3, 7], "100": [3, 6, 7, 8, 11], "million": 3, "744": 3, "gb": 3, "9": [3, 4, 5, 6, 7, 9, 10, 12], "aquaplanet": 3, "label": [3, 9], "mli": [3, 5, 8, 11], "yyyi": 3, "mm": 3, "dd": 3, "sssss": 3, "nc": [3, 4, 5, 7, 8, 9, 10, 11, 12], "where": [3, 4, 7, 12], "sss": 3, "correspond": [3, 4, 14, 15], "month": 3, "dai": 3, "second": [3, 5], "being": 3, "space": [3, 4], "200": 3, "apart": 3, "same": [3, 15], "wai": 3, "except": 3, "replac": [3, 7, 12], "mlo": [3, 5, 7], "scalar": [3, 7, 9, 15], "vari": 3, "time": [3, 4, 5, 6, 7, 10, 15], "ncol": [3, 4, 7, 10, 12, 14], "while": 3, "vertic": [3, 4, 6, 8, 9, 10, 15], "resolv": [3, 7, 15], "addition": 3, "lev": [3, 5, 7, 12, 14], "For": [3, 13], "lower": 3, "indic": [3, 7], "higher": 3, "atmospher": [3, 5], "thi": [3, 5, 6, 9, 10, 11, 13, 15], "becaus": 3, "pressur": [3, 5, 7, 14], "decreas": [3, 11], "monoton": [3, 11], "altitud": 3, "full": [3, 15], "supplementari": 3, "tabl": [3, 7], "There": [3, 14], "also": [3, 7], "contain": [3, 7, 15], "subsampl": [3, 8, 11, 15], "prenorm": [3, 15], "wa": [3, 15], "valid": [3, 7, 15], "metric": [3, 6, 12, 15], "reproduc": [3, 15], "create_npy_data_split": [3, 4, 15], "ipynb": [3, 4, 15], "08": [4, 6, 10, 11], "25": [4, 6, 7, 11], "14": [4, 5, 6, 9, 10, 12], "27": [4, 6, 9], "35": [4, 6], "196933": 4, "tensorflow": [4, 9, 10, 11, 13, 15], "core": [4, 9, 10, 11], "platform": [4, 9, 10, 11], "cpu_feature_guard": [4, 9, 10, 11], "cc": [4, 9, 10, 11], "182": [4, 6, 9, 10, 11], "binari": [4, 9, 10, 11], "optim": [4, 9, 10, 11], "avail": [4, 9, 10, 11], "cpu": [4, 9, 10, 11], "instruct": [4, 9, 10, 11], "perform": [4, 6, 9, 10, 11], "critic": [4, 9, 10, 11], "enabl": [4, 9, 10, 11], "avx2": [4, 9, 10, 11], "fma": [4, 9, 10, 11], "other": [4, 9, 10, 11], "rebuild": [4, 9, 10, 11], "appropri": [4, 9, 10, 11], "compil": [4, 9, 10, 11], "flag": [4, 9, 10, 11], "37": [4, 6, 11], "396448": 4, "w": [4, 6, 7, 8, 9, 10, 11, 14], "tf2tensorrt": [4, 9, 10, 11], "util": [4, 7, 9, 10, 11], "py_util": [4, 9, 10, 11], "38": [4, 6, 7, 9, 10, 11], "tf": [4, 9, 10, 11], "trt": [4, 9, 10, 11], "warn": [4, 7, 9, 10, 11, 12], "could": [4, 9, 10, 11], "find": [4, 9, 10, 11], "tensorrt": [4, 9, 10, 11], "grid_path": [4, 8, 9, 10, 11], "ocean": [4, 8, 9, 10, 11], "project": [4, 7, 8, 9, 10, 11, 12], "atm200007p": [4, 8, 9, 10, 11], "jlin96": [4, 8, 9, 10, 11], "climsim_low": [4, 8, 9, 10, 11, 12], "res_grid": [4, 8, 9, 10, 11, 12], "info": [4, 7, 8, 9, 10, 11, 12], "norm_path": [4, 8, 9, 10, 11], "xr": [4, 5, 7, 8, 9, 10, 11, 12], "open_dataset": [4, 5, 7, 8, 9, 10, 11, 12], "input_mean": [4, 8, 9, 10, 11], "input_max": [4, 8, 9, 10, 11], "input_min": [4, 8, 9, 10, 11], "output_scal": [4, 8, 9, 10, 11], "v1": [4, 8, 9, 10], "subset": [4, 8, 9, 10, 14], "set_to_v1_var": [4, 8, 9, 10], "npy": [4, 7, 8, 9, 10, 11, 15], "shown": [4, 6, 14], "below": [4, 6, 14], "chang": 4, "path": [4, 7, 8, 9, 10, 11], "own": 4, "data_path": [4, 8, 11], "neurips_proj": [4, 8, 9, 10, 11], "e3sm_train_npi": [4, 8, 9, 10, 11], "train_input_path": 4, "train_input": [4, 15], "train_target_path": 4, "train_target": [4, 15], "val_input_path": 4, "val_input": [4, 15], "val_target_path": 4, "val_target": [4, 15], "input_train": 4, "load_npy_fil": [4, 8, 9, 10, 11], "target_train": 4, "input_v": 4, "target_v": 4, "hat": 4, "y": [4, 7, 9, 11, 12], "e": [4, 5, 6, 7], "y_": 4, "const_model": 4, "mean": [4, 6, 7, 8, 9, 10, 11, 12], "axi": [4, 7, 9, 10, 11], "beta": 4, "x_": 4, "tx_": 4, "ty_": 4, "would": 4, "like": [4, 7, 15], "infer": 4, "respect": 4, "both": [4, 7], "ones": 4, "concaten": [4, 9], "featur": [4, 7], "bias_vector": 4, "np": [4, 5, 8, 9, 10, 11, 12], "shape": [4, 7, 9], "mlr_weight": 4, "linalg": 4, "inv": 4, "transpos": [4, 5, 7, 8, 10], "set_pressure_grid": [4, 8, 9, 10, 11], "data_split": [4, 8, 9, 10, 11], "val": 4, "const_pred_v": 4, "repeat": 4, "newaxi": 4, "print": [4, 9, 12], "x_val": 4, "bias_vector_v": 4, "mlr_pred_val": 4, "object": [4, 9], "model_nam": [4, 7, 8, 9, 10, 11], "const": 4, "mlr": 4, "add": [4, 7, 9], "name": [4, 12], "pred": [4, 7, 8, 10, 11], "custom": 4, "preds_val": 4, "dict": [4, 5, 7, 8, 9, 10, 11], "zip": [4, 8, 10, 11, 12], "1441920": 4, "128": [4, 7, 9], "undo": [4, 8, 10], "dp": [4, 5, 7, 8, 10], "g": [4, 5, 7, 8, 10], "area": [4, 8, 10, 12], "cell": [4, 7, 8, 10, 11, 12], "convert": [4, 5, 6, 7, 8, 10], "energi": [4, 6, 8, 10], "reweight_target": [4, 8, 9, 10], "reweight_pr": [4, 8, 10], "metrics_nam": [4, 8, 10], "mae": [4, 6, 10, 12], "rmse": [4, 6, 7, 10, 12], "r2": [4, 10, 12], "create_metrics_df": [4, 8, 10], "705": 4, "runtimewarn": [4, 7, 10, 11], "divid": [4, 10, 11], "zero": [4, 7, 9, 10, 11], "encount": [4, 7, 10, 11], "r_squar": [4, 10], "sq_diff": [4, 10], "sum": [4, 5, 7, 10, 11], "tss_time": [4, 10], "over": [4, 7, 10], "invalid": [4, 7, 10], "valu": [4, 5, 7, 9, 10, 12], "config": [4, 8, 10, 11, 12], "inlinebackend": [4, 8, 10, 11, 12], "figure_format": [4, 8, 10, 11, 12], "retina": [4, 8, 10, 11, 12], "letter": [4, 8, 10], "string": [4, 7, 8, 10], "ascii_lowercas": [4, 8, 10], "dictionari": [4, 7], "dict_var": [4, 10], "metrics_var_v": 4, "plot_df_byvar": [4, 10], "pd": [4, 7, 8, 10], "datafram": [4, 7, 8, 10], "renam": [4, 5, 7, 8, 10], "var_short_nam": [4, 7, 8, 10], "fig": [4, 7, 9, 10, 12], "ax": [4, 7, 9, 10, 11, 12], "plt": [4, 5, 7, 8, 9, 10, 12], "subplot": [4, 7, 9, 10, 12], "nrow": [4, 7, 10, 12], "len": [4, 7, 9, 10, 12], "sharex": [4, 7, 10], "true": [4, 7, 9, 10], "bar": [4, 7, 8, 9, 10], "legend": [4, 7, 8, 9, 10], "fals": [4, 7, 8, 10, 12], "set_ylabel": [4, 7, 9, 10], "m": [4, 5, 7, 8, 9, 10, 12, 14], "els": [4, 7, 10], "set_ylim": [4, 7, 10], "set_titl": [4, 7, 10, 12], "set_xlabel": [4, 7, 10], "set_xticklabel": [4, 7, 9, 10], "rotat": [4, 7, 9, 10], "ha": [4, 7, 9, 10], "center": [4, 7, 9, 10, 11], "columnspac": [4, 7, 10], "labelspac": [4, 7, 10], "handleheight": [4, 7, 10], "07": [4, 7, 9, 10], "handlelength": [4, 7, 10], "handletextpad": [4, 7, 10], "borderpad": [4, 7, 10], "loc": [4, 7, 10], "upper": [4, 7, 10], "right": [4, 5, 7, 9, 10], "set_size_inch": [4, 7, 10], "8": [4, 6, 9, 10, 12], "tight_layout": [4, 7, 10, 12], "If": [4, 13, 15], "differ": [4, 6, 7, 14], "best": [4, 7, 8, 10, 11], "scoring_input_path": [4, 9], "scoring_input": [4, 8, 9, 10, 11, 15], "scoring_target_path": [4, 9], "scoring_target": [4, 8, 9, 10, 11, 15], "input_scor": [4, 8, 9, 10, 11], "target_scor": [4, 8, 9, 10, 11], "const_pred_scor": 4, "x_score": 4, "bias_vector_scor": 4, "mlr_pred_scor": 4, "preds_scor": [4, 8, 10, 11], "1681920": [4, 9], "metrics_var_scor": [4, 8, 10], "import": [5, 7, 12], "o": 5, "xarrai": [5, 12, 13, 15], "numpi": [5, 7, 12], "matplotlib": [5, 7, 12], "pyplot": [5, 7, 12], "purpos": 5, "demonstr": 5, "summar": 5, "sum_i": 5, "left": [5, 7, 9], "delta": 5, "q_v": 5, "q_l": 5, "q_i": 5, "frac": 5, "p_i": 5, "t": [5, 7, 14], "p": [5, 7, 14], "state_q0001": 5, "state_q0002": 5, "state_q0003": 5, "pbuf_lhflx": 5, "l_v": 5, "cam_out_precc": [5, 7, 9, 12], "datadir": 5, "pscratch": 5, "sd": 5, "sungduk": [5, 7], "mmf_ne30": 5, "0001": 5, "02": [5, 7, 9, 12], "72000": 5, "begin": 5, "integr": [5, 7], "need": 5, "construct": [5, 7], "thick": [5, 7], "interfac": 5, "a_k": 5, "p_o": 5, "b_k": 5, "p_": 5, "come": 5, "initi": 5, "load": [5, 12, 14], "here": [5, 15], "extract": [5, 8, 11], "coeffici": [5, 6, 7], "note": 5, "assum": 5, "fix": [5, 12], "dure": 5, "physic": [5, 7], "parameter": 5, "so": 5, "onli": [5, 12], "comput": [5, 6], "onc": 5, "initial_condit": 5, "cf": 5, "cdir": 5, "inputdata": 5, "atm": 5, "cam": 5, "inic": 5, "homm": 5, "eam_i_mam3_linoz_ne30np4_l60_c20210917": 5, "ifac": 5, "hyai": [5, 7], "hybi": [5, 7], "p0": [5, 7], "def": [5, 7, 9, 12], "get_pressure_thick": 5, "coord": 5, "getpint": 5, "pint": 5, "attr": 5, "updat": [5, 7], "unit": [5, 6, 8, 10, 14], "pa": [5, 14], "long_nam": 5, "return": [5, 7, 9, 12], "dp_temp": 5, "diff": 5, "ilev": [5, 7], "n": [5, 7, 9], "dim": [5, 7, 12], "dataarrai": [5, 7], "state_p": [5, 7], "state_pmid": 5, "igrav": 5, "80616": [5, 7], "hard": 5, "constant": 5, "var": [5, 7, 8, 9, 12], "ci_": 5, "total_wat": 5, "ci_state_q0001": 5, "ci_state_q0002": 5, "ci_state_q0003": 5, "next": 5, "surfac": [5, 7, 14], "flux": [5, 7, 14], "evapotranspir": 5, "out": [5, 15], "precipit": 5, "surface_water_flux": 5, "1e3": 5, "kg": [5, 7, 14], "m2": [5, 7, 9], "1000": [5, 9], "posit": [5, 9], "expected_wat": 5, "1200": 5, "step": [5, 7, 15], "water_error": 5, "water_error_rel": 5, "check": [5, 15], "rel": 5, "error": [5, 6], "variou": 5, "map": [5, 12], "plot": [5, 6, 9, 12], "look": 5, "geograph": 5, "pattern": 5, "within": [5, 7], "few": 5, "percent": 5, "line": [5, 12], "line2d": 5, "0x7f6a3d1b6150": 5, "figsiz": [5, 7, 9, 12], "28": [5, 6, 7], "12": [5, 6, 7], "scatter": 5, "lon": [5, 7, 12], "lat": [5, 7, 12], "c": [5, 7, 9, 12], "vmin": [5, 7, 11, 12], "vmax": [5, 7, 11, 12], "cmap": [5, 7, 11, 12], "rdbu_r": 5, "xlabel": [5, 8, 9], "longitud": 5, "ylabel": [5, 8, 9], "latitud": [5, 7], "titl": [5, 8, 9], "mass": [5, 7], "colorbar": [5, 7, 12], "0x7f6a39183c90": 5, "four": 6, "calcul": [6, 11], "absolut": 6, "determin": 6, "r\u00b2": 6, "root": [6, 13, 15], "squar": 6, "continu": [6, 7], "rank": 6, "probabl": [6, 15], "crp": [6, 7], "comparison": 6, "all": [6, 7, 13, 15], "m\u00b2": [6, 14], "done": 6, "function": 6, "data_util": [6, 15], "separ": [6, 7, 11, 15], "longitudin": 6, "averag": [6, 8], "3d": [6, 7], "dt": [6, 7, 9, 12, 14], "585": 6, "684": 6, "845": 6, "683": 6, "685": 6, "732": 6, "dq": [6, 7, 9, 12, 14], "401": 6, "673": 6, "784": 6, "495": 6, "592": 6, "680": 6, "netsw": [6, 7, 9, 12, 14], "18": 6, "85": 6, "968": 6, "19": 6, "82": 6, "13": [6, 7], "36": [6, 10], "88": 6, "73": 6, "flwd": [6, 7, 9, 12, 14], "598": 6, "6": [6, 7, 8, 9, 11], "894": 6, "267": 6, "224": 6, "018": 6, "588": 6, "precsc": [6, 7, 9, 12, 14], "364": 6, "046": 6, "511": 6, "328": 6, "322": 6, "precc": [6, 7, 9, 12, 14], "83": 6, "250": 6, "42": 6, "34": [6, 7, 9], "33": 6, "46": 6, "81": 6, "sol": [6, 7, 9, 12, 14], "554": 6, "31": 6, "97": [6, 7], "94": 6, "soll": [6, 7, 9, 12, 14], "15": [6, 7], "924": 6, "60": [6, 7, 9], "30": [6, 9, 10], "96": 6, "solsd": [6, 7, 9, 12, 14], "817": 6, "075": 6, "331": 6, "533": 6, "846": 6, "159": 6, "solld": [6, 7, 9, 12, 14], "679": 6, "136": 6, "215": 6, "806": 6, "702": 6, "066": 6, "627": 6, "542": 6, "568": 6, "589": 6, "617": 6, "590": 6, "944": 6, "980": 6, "959": 6, "983": 6, "957": 6, "828": 6, "802": 6, "904": 6, "912": 6, "883": 6, "077": 6, "17": [6, 7], "909": 6, "68": 6, "69": 6, "67": 6, "926": 6, "927": 6, "960": 6, "929": 6, "961": 6, "943": 6, "916": 6, "945": 6, "948": 6, "928": 6, "915": 6, "951": 6, "923": 6, "956": 6, "940": 6, "921": 6, "813": 6, "857": 6, "797": 6, "866": 6, "837": 6, "796": 6, "369": 6, "696": 6, "825": 6, "421": 6, "482": 6, "721": 6, "284": 6, "643": 6, "896": 6, "518": 6, "780": 6, "91": 6, "537": 6, "77": 6, "26": [6, 7], "71": [6, 7], "86": 6, "070": 6, "220": 6, "969": 6, "914": 6, "530": 6, "001": 6, "078": 6, "095": 6, "734": 6, "76": 6, "682": 6, "90": [6, 7], "64": 6, "72": [6, 7], "58": 6, "22": 6, "92": 6, "999": [6, 7], "23": [6, 7, 9, 11], "40": [6, 9], "540": 6, "78": 6, "95": [6, 7, 12], "917": 6, "420": 6, "00": [6, 8, 9, 11], "417": 6, "47": 6, "63": 6, "158": 6, "305": 6, "708": 6, "645": 6, "565": 6, "62": 6, "53": [6, 11], "561": 6, "430": 6, "905": 6, "729": 6, "513": 6, "309": 6, "49": 6, "773": 6, "649": [6, 10], "599": 6, "925": [6, 7], "author": 7, "yu": 7, "last": [7, 12], "tue": 7, "29": [7, 10], "aug": 7, "pm": 7, "pdt": 7, "descript": [7, 14], "three": 7, "gener": 7, "manuscript": 7, "crps_clean": 7, "written": 7, "bhouri0412": 7, "In": [7, 12], "presav": 7, "read": 7, "fn_x_true": 7, "fn_y_tru": 7, "fn_y_pr": 7, "predict": [7, 8, 9, 10], "fn_grid": 7, "netcdif": 7, "fn_mli_mean": 7, "fn_mli_min": 7, "fn_mli_max": 7, "min": [7, 12], "max": [7, 12], "fn_mlo_scal": 7, "fn_save_metr": 7, "fn_save_metrics_avg": 7, "avg": 7, "dimens": [7, 14, 15], "fn_model_output": 7, "model_output": 7, "001_backup_phas": [7, 8, 10, 11], "7_retrained_models_step2_lot": [7, 8, 10, 11], "147_trial_0027": [7, 8, 10, 11], "h5": [7, 8, 9, 10, 11], "rpn_pred_v1_stride6": [7, 8, 10, 11], "val_predict_cnn_reshaped_stride6_fin": [7, 8, 10, 11], "hsr_preds_bestcrp": [7, 8, 10, 11], "ed_climsim_1_3_pr": [7, 8, 10, 11], "mlpv1": 7, "npy_data_convers": 7, "npy_fil": 7, "val_input_stride6": 7, "val_target_stride6": 7, "varlid": 7, "mmf_ne4_grid": 7, "orig": 7, "norm_factor": 7, "mli_mean": 7, "mli_min": 7, "mli_max": 7, "mlo_scal": 7, "fn_save_output": 7, "want": [7, 15], "k": [7, 14], "j": 7, "lv": 7, "rho_h2o": 7, "m3": 7, "should": 7, "constatn": 7, "e3sm_root": 7, "share": [7, 8, 10, 11], "shr_const_mod": 7, "f90": 7, "grav": 7, "acceler": 7, "graviti": 7, "00464e3": 7, "specif": [7, 14], "heat": [7, 8, 14], "dry": 7, "air": [7, 14], "501e6": 7, "latent": [7, 14], "evapor": 7, "lf": 7, "337e5": 7, "fusion": 7, "l": 7, "sublim": 7, "rho_air": 7, "101325": 7, "02214e26": 7, "38065e": 7, "966": 7, "273": 7, "densiti": 7, "stp": 7, "2923182846924677": 7, "shr_const_pstd": 7, "shr_const_rdair": 7, "shr_const_tkfrz": 7, "shr_const_rga": 7, "shr_const_mwdair": 7, "shr_const_avogad": 7, "shr_const_boltz": 7, "rho_h20": 7, "e3": 7, "fresh": 7, "vars_mlo_energy_conv": 7, "ptend_t": [7, 8, 9, 12], "ptend_q0001": [7, 8, 9, 12], "cam_out_netsw": [7, 9, 12], "cam_out_flwd": [7, 9, 12], "cam_out_precsc": [7, 9, 12], "cam_out_sol": [7, 9, 12], "cam_out_solsd": [7, 9, 12], "cam_out_solld": [7, 9, 12], "vars_longnam": 7, "moisten": [7, 8, 14], "q": [7, 14], "net": [7, 14], "shortwav": [7, 14], "downward": [7, 14], "longwav": [7, 14], "snow": [7, 14], "rate": [7, 14], "rain": [7, 14], "visibl": [7, 9, 14], "direct": [7, 14], "solar": [7, 14], "Near": [7, 14], "ir": [7, 14], "diffus": [7, 14], "panda": 7, "glob": 7, "dimems": 7, "dim_name_level": 7, "dim_name_sampl": 7, "x_true": 7, "astyp": 7, "float64": 7, "y_true": 7, "y_pred": 7, "n_sampl": 7, "norm": 7, "ds_grid": 7, "n_ncol": 7, "length": [7, 9], "nlat": 7, "nlon": 7, "area_wgt": 7, "loayd": 7, "to_xarrai": 7, "tile": 7, "int": [7, 9], "nsampl": 7, "back": 7, "merg": 7, "hyam": 7, "hybm": 7, "vars_mlo": 7, "sure": 7, "order": 7, "correct": 7, "vars_mlo_len": 7, "len_to_dim": 7, "an": [7, 9, 15], "ref": 7, "http": 7, "dev": 7, "en": 7, "stabl": 7, "d": 7, "kd": 7, "work": 7, "elif": [7, 9], "format": 7, "kei": 7, "turpl": 7, "kvar": 7, "enumer": 7, "ie": 7, "number": [7, 9], "kvar_len": 7, "kvar_dim": 7, "start": 7, "end": 7, "np_arrai": 7, "ind1": 7, "ind2": 7, "kvar_data": 7, "squeez": 7, "unscal": 7, "120": [7, 9], "denorm": 7, "fyi": 7, "hybrid": 7, "sigma": 7, "coordin": [7, 11], "system": [7, 15], "z": 7, "tmp": 7, "isel": 7, "slice": 7, "break": 7, "n_timestep": 7, "dim_ncol": 7, "arang": [7, 9], "dim_timestep": 7, "new_ind": 7, "multiindex": 7, "from_product": 7, "assign_coord": 7, "unstack": 7, "del": 7, "equival": 7, "ds_energi": 7, "keep": 7, "origin": [7, 11], "deep": 7, "ptend_": 7, "q0001": 7, "rho": 7, "dz": 7, "all_metr": 7, "A": 7, "after": 7, "have": [7, 13, 15], "rest": 7, "spatial": 7, "analysi": 7, "desir": 7, "distribut": 7, "plane": 7, "select": [7, 8, 11], "varibl": 7, "caclul": 7, "ab": 7, "sqrt": 7, "wise": 7, "kmetric": 7, "fn_save": 7, "metrics_netcdf": [7, 12], "_": [7, 12], "to_netcdf": 7, "b": 7, "simpl": [7, 14], "flatten": 7, "metrics_stack": 7, "to_stacked_arrai": 7, "ml_out_idx": 7, "sample_dim": 7, "output_idx": 7, "to_csv": 7, "002488": 7, "005218": 7, "897846": 7, "004997": 7, "009940": 7, "934334": 7, "008768": 7, "013675": 7, "966718": 7, "014756": 7, "021097": 7, "982648": 7, "023048": 7, "030524": 7, "993642": 7, "123": [7, 9], "333065": 7, "876357": 7, "685671": 7, "124": [7, 9], "970805": 7, "403315": 7, "961380": 7, "125": [7, 9], "299178": 7, "954437": 7, "947612": 7, "126": [7, 9], "533141": 7, "420306": 7, "955713": 7, "127": [7, 9], "806307": 7, "118702": 7, "866159": 7, "row": 7, "Then": 7, "metrics_vert_avg": 7, "remov": 7, "dummi": 7, "to_panda": 7, "682765": 7, "420904": 7, "588987": 7, "494752": 7, "321821": 7, "inf": 7, "360915": 7, "707551": 7, "982684": 7, "224468": 7, "968642": 7, "924299": 7, "683915": 7, "733680": 7, "metric_mlp160": 7, "kmodel": 7, "mlpv2": 7, "csv_path": 7, "metrics_": 7, "top160": 7, "csv_file": 7, "sort": 7, "df_list": 7, "read_csv": 7, "kf": 7, "index_col": 7, "concat": 7, "metric_mlp160_stat": 7, "median": 7, "std": 7, "p05": 7, "quantil": 7, "05": [7, 9, 12], "p10": 7, "p25": 7, "p75": 7, "75": 7, "p90": 7, "p95": 7, "messag": 7, "due": 7, "nan": 7, "home": 7, "tf_conda": 7, "lib": [7, 12], "python3": [7, 12], "site": [7, 12], "function_bas": 7, "4573": 7, "subtract": 7, "diff_b_a": 7, "without": 7, "metric_mlp160_lev": 7, "metric_mlp160_stat_lev": 7, "requir": [7, 15], "One": 7, "one": 7, "fn_metric": 7, "fn_metrics_stack": 7, "assign": 7, "color": [7, 9], "davidmathlog": 7, "com": 7, "colorblind": 7, "23000000": 7, "23e69f00": 7, "2356b4e9": 7, "23009e73": 7, "23f0e442": 7, "230072b2": 7, "23d55e00": 7, "23cc79a7": 7, "lc_model": 7, "0072b2": 7, "e69f00": [7, 9], "2b2b2b": 7, "882255": 7, "009e73": [7, 9], "d55e00": [7, 9], "56b4e9": 7, "short": 7, "var_idx": 7, "surface_var": 7, "fn_crp": 7, "metrics_crp": 7, "rpn_crp": 7, "cvae_crp": 7, "hsr_crp": 7, "plot_this_model": 7, "plot_this_models_crp": 7, "which": [7, 9, 11, 15], "plot_this_metr": 7, "subpanel": 7, "abc": 7, "abcdefg": 7, "plotdata": 7, "mse": 7, "vertical_avg": 7, "plotdata_by_metr": 7, "k_plot_this_model": 7, "_ax": 7, "width": [7, 9, 12], "spread": 7, "errbar_model": 7, "x_off": 7, "plot_x": 7, "plot_m": 7, "plot_low": 7, "plot_upp": 7, "errorbar": 7, "yerr": 7, "capsiz": 7, "none": [7, 9, 11], "lw": 7, "neg": 7, "log": [7, 9, 10], "set_yscal": [7, 9, 10], "savefig": [7, 9], "si_fig_3": 7, "pdf": 7, "tell": 7, "you": [7, 13, 15], "idx_start": 7, "idx_end": 7, "iloc": 7, "isinf": 7, "fill_between": 7, "silver": 7, "zorder": [7, 9], "ylim": 7, "si_fig_4": 7, "si_fig_5": 7, "sw_log": 7, "abbcdefghij": 7, "gridspec_kw": 7, "height_ratio": 7, "get_gridspec": 7, "underli": 7, "axbig": 7, "add_subplot": 7, "03": [7, 9, 11], "93": 7, "horizontalalign": [7, 9], "verticalalign": [7, 9], "transform": [7, 9], "transax": 7, "fontweight": [7, 9], "demi": [7, 9], "frameon": 7, "bottom": [7, 9], "lot_this_model": 7, "kk": 7, "fig_2": 7, "upto": 7, "cm": 7, "mpl_toolkit": [7, 12], "axes_grid1": 7, "imagegrid": 7, "sklearn": 7, "r2_score": 7, "singl": 7, "ds_hist": 7, "entri": 7, "fn_y": 7, "fn_x": 7, "plot_hexbin": 7, "str": [7, 9], "klev": 7, "xmin": 7, "xmax": 7, "ymin": 7, "ymax": 7, "fn_fig": 7, "imgrid": 7, "111": 7, "similar": 7, "nrows_ncol": 7, "2x2": 7, "axes_pad": 7, "pad": 7, "between": 7, "inch": 7, "cbar_mod": 7, "cbar_loc": 7, "cbar_pad": 7, "aspect": 7, "panel_id": 7, "plotx": 7, "ploti": 7, "plotrms": 7, "plotr2": 7, "sample_weight": 7, "multioutput": 7, "uniform_averag": 7, "size": [7, 9, 11], "h": 7, "hexbin": 7, "gridsiz": 7, "50": 7, "extent": 7, "bin": 7, "mincnt": 7, "viridi": [7, 12], "alpha": [7, 9], "axlin": 7, "slope": 7, "linewidth": [7, 12], "set_facecolor": 7, "efefef": 7, "set_xlim": 7, "prop": 7, "boxstyl": 7, "round": [7, 12], "facecolor": 7, "wheat": 7, "nr2": 7, "2f": 7, "nrmse": 7, "va": [7, 9], "bbox": [7, 9], "fontsiz": [7, 9, 12], "2e": 7, "3f": 7, "cb": [7, 12], "cbar_ax": 7, "set_label": 7, "count": 7, "suptitl": [7, 12], "55": 7, "si_scatter_": 7, "split": 7, "si_scatter_dtdt": 7, "32": [7, 8, 9], "57": 7, "0045": 7, "si_scatter_dqdt": 7, "0095": 7, "cartopi": 7, "cr": 7, "ccr": 7, "cfeatur": 7, "pyproj": 7, "__init__": [7, 12], "89": 7, "userwarn": [7, 11], "unabl": 7, "databas": 7, "_pyproj_global_context_initi": 7, "fn_data": 7, "engin": [7, 12], "netcdf4": [7, 12], "mlp_mae": 7, "plot_metric_map": 7, "jet": 7, "clev": 7, "defin": 7, "subplot_kw": 7, "robinson": 7, "central_longitud": 7, "179": 7, "dimension": 7, "geoax": 7, "loop": 7, "set_glob": 7, "ds_plotdata": 7, "1e": 7, "clevel": 7, "linspac": 7, "tricontourf": [7, 12], "platecarre": 7, "extend": 7, "set_und": 7, "set_clim": 7, "contour": 7, "contourf": 7, "coolwarm": 7, "coastlin": 7, "025": [7, 12], "087": 7, "subplots_adjust": 7, "add_ax": [7, 12], "145": 7, "020": 7, "cax": [7, 12], "tick": [7, 9], "si_2d": 7, "map_r2_": 7, "turbo": 7, "dtdt": 7, "dqdt": 7, "input_path": [8, 10], "target_path": [8, 10], "cvae_pred_path": [8, 10, 11], "final_metr": [8, 9, 10, 11], "cvae_preds_manu": [8, 10, 11], "ed_pred_path": [8, 10, 11], "behren": [8, 10, 11], "ed_behrens_2022": [8, 10, 11], "hsr_pred_path": [8, 10, 11], "rpn_pred_path": [8, 10, 11], "figure_ingredi": [8, 10, 11], "cnn_pred_path": [8, 10, 11], "mlp_pred_path": [8, 10, 11], "load_path": [8, 10, 11], "load_h5_fil": [8, 9, 10, 11], "results_complet": 8, "results_temp": 8, "target_var": 8, "calc_bia": 8, "preds_weighted_scor": 8, "target_weighted_scor": [8, 9], "avg_grid": 8, "e3sm_train": [8, 11], "regular": [8, 9, 11], "express": [8, 11], "set_regexp": [8, 11], "regexp": [8, 11], "0008": [8, 11], "23456789": [8, 11], "012": [8, 11], "0009": [8, 11], "01": [8, 9, 11], "tempor": [8, 11], "set_stride_sampl": [8, 11], "stride_sampl": [8, 11], "set_filelist": [8, 11], "pressure_grid_plot": [8, 11], "get_pressure_grid_plot": [8, 11], "across": 8, "y_pressur": 8, "4380": [8, 11], "135": 8, "51it": 8, "xlim": 8, "gca": 8, "invert_yaxi": 8, "hpa": 8, "bia": 8, "text": [8, 9], "bias_df": 8, "2024": 9, "54": 9, "996403": 9, "010805": 9, "set": [9, 15], "cvae_samples_path": 9, "shared_fold": 9, "cvae_samples_manu": 9, "hsr_samples_path": 9, "crps_ingredi": 9, "hsr_samples_bestcrp": 9, "rpn_samples_path": 9, "rpn_crps_32_sampl": 9, "cvae_color": 9, "hsr_color": 9, "rpn_color": 9, "hsr_sampl": 9, "expand_dim": 9, "output_weight": 9, "just_weight": 9, "rpn_sampl": 9, "cvae_sampl": 9, "num_sampl": 9, "reshape_output": 9, "reshap": 9, "num_latlon": 9, "reshape_samplepr": 9, "samplepr": 9, "num_crp": 9, "crps_idx": 9, "121": 9, "122": 9, "hsr_ptend_t_sampl": 9, "hsr_ptend_q0001_sampl": 9, "hsr_netsw_sampl": 9, "hsr_flwds_sampl": 9, "hsr_precsc_sampl": 9, "hsr_precc_sampl": 9, "hsr_sols_sampl": 9, "hsr_soll_sampl": 9, "hsr_solsd_sampl": 9, "hsr_solld_sampl": 9, "hsr_ptend_t_crp": 9, "calc_crp": [9, 15], "hsr_ptend_q0001_crp": 9, "hsr_netsw_crp": 9, "hsr_flwds_crp": 9, "hsr_precsc_crp": 9, "hsr_precc_crp": 9, "hsr_sols_crp": 9, "hsr_soll_crp": 9, "hsr_solsd_crp": 9, "hsr_solld_crp": 9, "rpn_ptend_t_sampl": 9, "rpn_ptend_q0001_sampl": 9, "rpn_netsw_sampl": 9, "rpn_flwds_sampl": 9, "rpn_precsc_sampl": 9, "rpn_precc_sampl": 9, "rpn_sols_sampl": 9, "rpn_soll_sampl": 9, "rpn_solsd_sampl": 9, "rpn_solld_sampl": 9, "rpn_ptend_t_crp": 9, "rpn_ptend_q0001_crp": 9, "rpn_netsw_crp": 9, "rpn_flwds_crp": 9, "rpn_precsc_crp": 9, "rpn_precc_crp": 9, "rpn_sols_crp": 9, "rpn_soll_crp": 9, "rpn_solsd_crp": 9, "rpn_solld_crp": 9, "cvae_ptend_t_sampl": 9, "cvae_ptend_q0001_sampl": 9, "cvae_netsw_sampl": 9, "cvae_flwds_sampl": 9, "cvae_precsc_sampl": 9, "cvae_precc_sampl": 9, "cvae_sols_sampl": 9, "cvae_soll_sampl": 9, "cvae_solsd_sampl": 9, "cvae_solld_sampl": 9, "cvae_ptend_t_crp": 9, "cvae_ptend_q0001_crp": 9, "cvae_netsw_crp": 9, "cvae_flwds_crp": 9, "cvae_precsc_crp": 9, "cvae_precc_crp": 9, "cvae_sols_crp": 9, "cvae_soll_crp": 9, "cvae_solsd_crp": 9, "cvae_solld_crp": 9, "arrai": 9, "64452935e": 9, "62259536e": 9, "80022113e": 9, "86215301e": 9, "45524467e": 9, "12186575e": 9, "48110997e": 9, "97469571e": 9, "56030249e": 9, "79131149e": 9, "16331403e": 9, "21578507e": 9, "49252704e": 9, "25611830e": 9, "44821604e": 9, "40285799e": 9, "15790195e": 9, "78318768e": 9, "40925068e": 9, "68572293e": 9, "46902240e": 9, "29146575e": 9, "03093596e": 9, "14888729e": 9, "30091135e": 9, "43560211e": 9, "56100070e": 9, "70676086e": 9, "88747335e": 9, "10736974e": 9, "37875430e": 9, "66745272e": 9, "97644476e": 9, "29229892e": 9, "61910917e": 9, "92998254e": 9, "22204569e": 9, "47800955e": 9, "66151217e": 9, "80172402e": 9, "88693905e": 9, "92602307e": 9, "95234906e": 9, "98099050e": 9, "99478430e": 9, "93281328e": 9, "77531842e": 9, "53262090e": 9, "21879157e": 9, "87347592e": 9, "56581612e": 9, "28067996e": 9, "04011914e": 9, "85616712e": 9, "71504728e": 9, "61665419e": 9, "56434924e": 9, "56500244e": 9, "69494925e": 9, "38535910e": 9, "09964351e": 9, "04": [9, 11], "94716185e": 9, "45817254e": 9, "54526780e": 9, "37499075e": 9, "17844239e": 9, "12240854e": 9, "77118824e": 9, "12006289e": 9, "54857911e": 9, "94234480e": 9, "10133683e": 9, "20660057e": 9, "26658885e": 9, "43752132e": 9, "18095680e": 9, "05158905e": 9, "54482834e": 9, "17439077e": 9, "59229387e": 9, "29922268e": 9, "93504699e": 9, "91376195e": 9, "10632890e": 9, "24901516e": 9, "38096908e": 9, "52380101e": 9, "67711088e": 9, "85900792e": 9, "08165654e": 9, "34792719e": 9, "63909608e": 9, "96056568e": 9, "28343686e": 9, "63642409e": 9, "99187348e": 9, "33325467e": 9, "65474340e": 9, "91395158e": 9, "13129435e": 9, "27743743e": 9, "36710211e": 9, "44562990e": 9, "50487780e": 9, "54348760e": 9, "49845180e": 9, "35335941e": 9, "12674556e": 9, "83402520e": 9, "48294656e": 9, "13121992e": 9, "79465017e": 9, "49792496e": 9, "25633417e": 9, "05329123e": 9, "90173964e": 9, "81120951e": 9, "76672406e": 9, "83641975e": 9, "19446069e": 9, "73251791e": 9, "82944418e": 9, "59602388e": 9, "98618027e": 9, "27286520e": 9, "54885789e": 9, "16360736e": 9, "78262043e": 9, "11512068e": 9, "56638606e": 9, "15719036e": 9, "81151372e": 9, "48963976e": 9, "06409983e": 9, "40892402e": 9, "46607576e": 9, "23532845e": 9, "94368780e": 9, "99660039e": 9, "91111511e": 9, "62408267e": 9, "05344993e": 9, "17383893e": 9, "33361987e": 9, "50452877e": 9, "66700591e": 9, "85627993e": 9, "07086629e": 9, "31267073e": 9, "59162985e": 9, "93833552e": 9, "30010166e": 9, "70140378e": 9, "05909270e": 9, "45709469e": 9, "85383785e": 9, "22464445e": 9, "54421089e": 9, "79971407e": 9, "99600738e": 9, "13013040e": 9, "20302929e": 9, "22904537e": 9, "26992189e": 9, "29354662e": 9, "24879344e": 9, "06184758e": 9, "79858610e": 9, "43666272e": 9, "01841036e": 9, "64440306e": 9, "26873462e": 9, "95764705e": 9, "72004347e": 9, "52004583e": 9, "35474043e": 9, "30504244e": 9, "31031664e": 9, "52735633e": 9, "37139096e": 9, "91876853e": 9, "04959436e": 9, "68845968e": 9, "74949440e": 9, "81680016e": 9, "91993158e": 9, "71901841e": 9, "26753244e": 9, "58093021e": 9, "59118996e": 9, "91893069e": 9, "15031182e": 9, "31706706e": 9, "54653721e": 9, "31548503e": 9, "12900722e": 9, "67473831e": 9, "68643820e": 9, "60039708e": 9, "96670790e": 9, "46873626e": 9, "27539712e": 9, "63887427e": 9, "81258559e": 9, "91777641e": 9, "55155273e": 9, "05374931e": 9, "98121883e": 9, "01309153e": 9, "27143289e": 9, "58108658e": 9, "94682603e": 9, "37836475e": 9, "87280540e": 9, "45209550e": 9, "10820473e": 9, "84679373e": 9, "62947681e": 9, "44143740e": 9, "24594675e": 9, "05400953e": 9, "84623452e": 9, "57766476e": 9, "02086921e": 9, "07734240e": 9, "11358787e": 9, "12212589e": 9, "10221591e": 9, "05864436e": 9, "98777575e": 9, "39087405e": 9, "83900577e": 9, "34792147e": 9, "90393833e": 9, "44943612e": 9, "97091981e": 9, "40733399e": 9, "75098370e": 9, "42324696e": 9, "27723774e": 9, "40730596e": 9, "61185885e": 9, "45184232e": 9, "71230677e": 9, "14881271e": 9, "02170995e": 9, "91551132e": 9, "18017579e": 9, "68248735e": 9, "33405164e": 9, "10370405e": 9, "96284437e": 9, "01036175e": 9, "60295806e": 9, "04251994e": 9, "55841947e": 9, "79451226e": 9, "82631098e": 9, "04812778e": 9, "13299709e": 9, "68607408e": 9, "93416906e": 9, "44382965e": 9, "58559831e": 9, "74708498e": 9, "28071054e": 9, "05209989e": 9, "00583888e": 9, "01809612e": 9, "27330493e": 9, "59577652e": 9, "98336223e": 9, "44371024e": 9, "98081634e": 9, "62782334e": 9, "35832239e": 9, "20564538e": 9, "10774489e": 9, "06134747e": 9, "99619094e": 9, "96011807e": 9, "84402778e": 9, "06749944e": 9, "13822753e": 9, "20188274e": 9, "25013864e": 9, "26585143e": 9, "25310623e": 9, "22009955e": 9, "16785519e": 9, "10468428e": 9, "04040428e": 9, "80328542e": 9, "26384797e": 9, "69389060e": 9, "04823983e": 9, "25744061e": 9, "46039679e": 9, "80303232e": 9, "32519781e": 9, "38887855e": 9, "06": 9, "54347880e": 9, "17527340e": 9, "57854577e": 9, "80049206e": 9, "45940442e": 9, "29068954e": 9, "53249336e": 9, "16248936e": 9, "07374324e": 9, "31743853e": 9, "90586105e": 9, "29350923e": 9, "30518152e": 9, "65271882e": 9, "16288283e": 9, "09750531e": 9, "27209939e": 9, "66572413e": 9, "76113908e": 9, "03678923e": 9, "74471816e": 9, "83229162e": 9, "83063393e": 9, "17926972e": 9, "92780541e": 9, "99577139e": 9, "36043123e": 9, "20982773e": 9, "53156909e": 9, "91679350e": 9, "36387001e": 9, "89090582e": 9, "49966088e": 9, "21652028e": 9, "00510359e": 9, "90094702e": 9, "84137350e": 9, "85464920e": 9, "84301222e": 9, "82413787e": 9, "07975745e": 9, "17560773e": 9, "25744629e": 9, "33906258e": 9, "38730797e": 9, "41238527e": 9, "40093977e": 9, "35530910e": 9, "28991969e": 9, "22253231e": 9, "15516052e": 9, "08704487e": 9, "02788397e": 9, "64517617e": 9, "96440076e": 9, "15856570e": 9, "29145414e": 9, "79578552e": 9, "42782251e": 9, "1580774343531792": 9, "6445144552173825": 9, "620414442990606": 9, "560824417480576": 9, "9048409310019667": 9, "297920290994476": 9, "369402740664123": 9, "138460986732461": 9, "773135360907154": 9, "598501530273872": 9, "3054146410932317": 9, "10023245444231": 9, "817277832474153": 9, "430497646630767": 9, "7289959221787274": 9, "08300604728733": 9, "30868859878903": 9, "4874380675445": 9, "649343743252384": 9, "682123812871824": 9, "707906789582796": 9, "56500945022936": 9, "529120573006654": 9, "732408880589889": 9, "5132942979190234": 9, "16616853117693": 9, "90870472223168": 9, "42338355955961": 9, "944789868900808": 9, "9253716615661745": 9, "categori": 9, "group": 9, "num_group": 9, "po": 9, "set_xtick": 9, "better": 9, "readabl": 9, "setp": 9, "get_xticklabel": 9, "45": 9, "rotation_mod": 9, "anchor": [9, 12], "recreat": 9, "recreated_plot_path": 9, "crps_bar_plot_correct": 9, "png": 9, "show": [9, 12], "agg_filt": 9, "filter": 9, "take": 9, "float": 9, "dpi": 9, "anim": 9, "bool": 9, "backgroundcolor": 9, "properti": 9, "patch": 9, "fancybboxpatch": 9, "clip_box": 9, "clip_on": 9, "clip_path": 9, "fontfamili": 9, "famili": 9, "fontnam": 9, "serif": 9, "san": 9, "cursiv": 9, "fantasi": 9, "monospac": 9, "fontproperti": 9, "font": 9, "font_properti": 9, "font_manag": 9, "pathlib": 9, "xx": 9, "small": 9, "medium": 9, "larg": 9, "fontstretch": 9, "stretch": 9, "numer": 9, "ultra": 9, "condens": 9, "extra": 9, "semi": 9, "expand": 9, "fontstyl": 9, "style": 9, "ital": 9, "obliqu": 9, "fontvari": 9, "variant": 9, "cap": 9, "weight": [9, 11], "ultralight": 9, "light": 9, "roman": 9, "semibold": 9, "demibold": 9, "bold": 9, "heavi": 9, "black": 9, "gid": 9, "in_layout": 9, "linespac": 9, "math_fontfamili": 9, "multialign": 9, "ma": 9, "parse_math": 9, "path_effect": 9, "abstractpatheffect": 9, "picker": 9, "callabl": 9, "raster": 9, "default": 9, "sketch_param": 9, "snap": 9, "transform_rotates_text": 9, "url": 9, "usetex": 9, "center_baselin": 9, "wrap": 9, "pwd": 9, "941637": 10, "922437": 10, "dict_idx": 10, "metrics_idx_scor": 10, "16": 11, "644365": 11, "040170": 11, "scoring_data": 11, "input_scoring_path": 11, "target_scoring_path": 11, "scoring_data_copi": 11, "deepcopi": 11, "72it": 11, "part": 11, "preds_copi": 11, "plot_r2_analysi": 11, "792": 11, "pcolor": 11, "interpret": 11, "increas": 11, "mai": 11, "lead": 11, "incorrectli": 11, "edg": 11, "case": 11, "pleas": [11, 13], "suppli": 11, "explicit": 11, "contour_plot": 11, "coeff": 11, "blue": 11, "pcolormesh": 11, "799": 11, "pred_moist_daily_long": 11, "test_moist_daily_long": 11, "803": 11, "640x480": 11, "basemap": 12, "filterwarn": 12, "metricv": 12, "vardict": 12, "varnam": 12, "item": 12, "flat": 12, "robin": 12, "lon_0": 12, "165": 12, "drawcoastlin": 12, "rect": 12, "975": 12, "keyboardinterrupt": 12, "traceback": 12, "most": 12, "recent": 12, "miniconda": 12, "1133": 12, "self": 12, "llcrnrlon": 12, "llcrnrlat": 12, "urcrnrlon": 12, "urcrnrlat": 12, "llcrnrx": 12, "llcrnry": 12, "urcrnrx": 12, "urcrnri": 12, "height": 12, "area_thresh": 12, "rsphere": 12, "ellp": 12, "lat_t": 12, "lat_1": 12, "lat_2": 12, "lat_0": 12, "lon_1": 12, "lon_2": 12, "o_lon_p": 12, "o_lat_p": 12, "k_0": 12, "no_rot": 12, "suppress_tick": 12, "satellite_height": 12, "boundinglat": 12, "fix_aspect": 12, "celesti": 12, "epsg": 12, "1130": 12, "coastpolygon": 12, "append": 12, "1131": 12, "coastseg": 12, "segment": 12, "instead": 12, "polygon": 12, "1132": 12, "type": 12, "_readboundarydata": 12, "gshh": 12, "as_polygon": 12, "1134": 12, "sg": 12, "1135": 12, "geo": 12, "structur": 12, "land": 12, "1136": 12, "current": 12, "is_land": 12, "method": [12, 15], "1400": 12, "1397": 12, "poli": 12, "is_valid": 12, "1398": 12, "instersect": 12, "1399": 12, "region": 12, "process": 12, "intersect": 12, "boundarypolyl": 12, "1401": 12, "1402": 12, "geom": 12, "pip": [13, 15], "alreadi": [13, 15], "etc": [13, 15], "your": [13, 15], "altern": [13, 15], "dep": [13, 15], "six": 14, "describ": 14, "pre": 14, "temperatur": 14, "humid": 14, "solin": 14, "insol": 14, "lhflx": 14, "shflx": 14, "sensibl": 14, "tendenc": 14, "version": 15, "contribut": 15, "stat": 15, "gu4243": 15, "gr": 15, "5243": 15, "appli": 15, "scienc": 15, "fall": 15, "columbia": 15, "univers": 15, "treat": 15, "held": 15, "kaggl": 15, "competit": 15, "someth": 15, "channel": 15, "broadcast": 15, "do": 15, "main_figure_gener": 15, "see": 15, "calc_ma": 15, "calc_rms": 15, "calc_r2": 15, "point": 15, "estim": 15, "calibr": 15}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"project": [0, 2], "structur": [0, 2], "contributor": 1, "guidelin": 1, "feedback": 1, "futur": 1, "develop": 1, "guid": 1, "websit": 1, "how": 1, "build": 1, "local": 1, "climsim": [2, 7], "an": 2, "open": 2, "larg": 2, "scale": [2, 7], "dataset": [2, 3, 7], "train": [2, 4], "high": 2, "resolut": 2, "physic": 2, "emul": 2, "hybrid": 2, "multi": 2, "climat": 2, "simul": 2, "get": [2, 8], "start": 2, "model": [2, 4, 7, 14], "evalu": [2, 4, 6, 10], "demo": 2, "notebook": 2, "refer": 2, "legal": 2, "inform": 3, "import": [4, 8, 9, 10, 11], "data_util": [4, 8, 9, 10, 11], "instanti": [4, 8, 9, 10, 11], "class": [4, 8, 9, 10, 11], "load": [4, 7, 8, 9, 10, 11], "valid": 4, "data": [4, 8, 9, 10, 11], "constant": 4, "predict": [4, 11], "multipl": 4, "linear": 4, "regress": 4, "ad": 4, "bia": 4, "unit": [4, 7], "creat": [4, 10], "your": 4, "here": [4, 7], "set": [4, 7, 8, 10, 11], "pressur": [4, 8, 10, 11], "grid": [4, 8, 10, 11], "weight": [4, 7, 8, 10], "target": 4, "calcul": [4, 7, 8, 9], "metric": [4, 7, 10], "plot": [4, 7, 8, 10, 11], "score": [4, 9], "do": 4, "thi": [4, 7], "veri": 4, "end": 4, "when": 4, "you": 4, "have": 4, "finish": 4, "tune": [4, 7], "hyperparamet": 4, "ar": 4, "seek": 4, "final": 4, "water": 5, "conserv": 5, "exampl": 5, "visual": 7, "part": 7, "1": [7, 10], "save": 7, "them": 7, "csv": 7, "file": 7, "chang": 7, "name": 7, "user": 7, "input": 7, "onli": 7, "energi": 7, "convers": 7, "factor": 7, "main": 7, "pack": 7, "np": 7, "arrai": 7, "xarrai": 7, "area": 7, "vertic": 7, "2": 7, "base": 7, "global": 7, "averag": 7, "output": [7, 8, 10], "check": 7, "perform": 7, "varianc": 7, "across": 7, "top": 7, "160": 7, "mlp": 7, "out": 7, "8": 7, "000": 7, "trial": 7, "pre": 7, "make": [7, 8], "figur": 7, "intercomparison": 7, "level": 7, "aggreg": 7, "i": 7, "includ": 7, "text": 7, "profil": 7, "tendenc": [7, 11], "variabl": 7, "si": 7, "3": 7, "togeth": 7, "mae": 7, "r2": [7, 11], "4": 7, "scatter": 7, "5": 7, "2d": 7, "map": 7, "bias": 8, "axi": 8, "packag": [9, 11], "py": [9, 11], "sampl": 9, "defin": 9, "us": 9, "function": 9, "crp": 9, "skill": 11, "temperatur": 11, "specif": 11, "humid": 11, "latitud": 11, "analysi": 11, "code": 13, "instal": 13, "baselin": 14, "quickstart": 15}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx": 60}, "alltitles": {"Project structure": [[0, "project-structure"]], "Contributor Guidelines": [[1, "contributor-guidelines"]], "Feedback and future development": [[1, "feedback-and-future-development"]], "Developer Guide for the website": [[1, "developer-guide-for-the-website"]], "How to build the website locally": [[1, "how-to-build-the-website-locally"]], "ClimSim: An open large-scale dataset for training high-resolution physics emulators in hybrid multi-scale climate simulators": [[2, "climsim-an-open-large-scale-dataset-for-training-high-resolution-physics-emulators-in-hybrid-multi-scale-climate-simulators"]], "Getting Started": [[2, "getting-started"]], "Models and Evaluation": [[2, "models-and-evaluation"]], "Demo Notebooks": [[2, "demo-notebooks"]], "Project Structure": [[2, "project-structure"]], "References": [[2, "references"]], "Legal": [[2, "legal"]], "Dataset Information": [[3, "dataset-information"]], "Import data_utils": [[4, "import-data-utils"], [8, "import-data-utils"], [10, "import-data-utils"]], "Instantiate class": [[4, "instantiate-class"], [8, "instantiate-class"], [9, "instantiate-class"], [10, "instantiate-class"]], "Load training and validation data": [[4, "load-training-and-validation-data"]], "Train models": [[4, "train-models"]], "Train constant prediction model": [[4, "train-constant-prediction-model"]], "Train multiple linear regression model": [[4, "train-multiple-linear-regression-model"]], "adding bias unit": [[4, "adding-bias-unit"]], "create model": [[4, "create-model"]], "Train your models here": [[4, "train-your-models-here"]], "Evaluate on validation data": [[4, "evaluate-on-validation-data"]], "Set pressure grid": [[4, "set-pressure-grid"], [4, "id1"]], "Load predictions": [[4, "load-predictions"], [4, "id2"]], "Weight predictions and target": [[4, "weight-predictions-and-target"], [4, "id3"]], "Set and calculate metrics": [[4, "set-and-calculate-metrics"]], "Create plots": [[4, "create-plots"], [4, "id4"], [10, "create-plots"]], "Evaluate on scoring data": [[4, "evaluate-on-scoring-data"]], "Do this at the VERY END (when you have finished tuned the hyperparameters for your  model and are seeking a final evaluation)": [[4, "do-this-at-the-very-end-when-you-have-finished-tuned-the-hyperparameters-for-your-model-and-are-seeking-a-final-evaluation"]], "Load scoring data": [[4, "load-scoring-data"], [9, "load-scoring-data"]], "Water Conservation Example": [[5, "water-conservation-example"]], "Evaluation": [[6, "evaluation"]], "ClimSim: Metrics calculation and visualization": [[7, "climsim-metrics-calculation-and-visualization"]], "<PART 1> Calculate metrics and save them into a csv file": [[7, "part-1-calculate-metrics-and-save-them-into-a-csv-file"]], "Change file names [user input here only!]": [[7, "change-file-names-user-input-here-only"]], "Set energy conversion scale factors": [[7, "set-energy-conversion-scale-factors"]], "Main": [[7, "main"]], "Pack np arrays to xarray dataset": [[7, "pack-np-arrays-to-xarray-dataset"]], "1) unit conversion / area weighting / vertical weighting": [[7, "unit-conversion-area-weighting-vertical-weighting"]], "2) Calculate metrics based on globally-averaged model output": [[7, "calculate-metrics-based-on-globally-averaged-model-output"]], "Check the performance variance across top 160 MLP models (out of ~8,000 tuning trials)": [[7, "check-the-performance-variance-across-top-160-mlp-models-out-of-8-000-tuning-trials"]], "<PART 2> Load pre-saved csv files and make figures": [[7, "part-2-load-pre-saved-csv-files-and-make-figures"]], "Plot metrics (model intercomparison)": [[7, "plot-metrics-model-intercomparison"]], "plot 1. level aggregated metrics": [[7, "plot-1-level-aggregated-metrics"]], "This figure is included in the main text": [[7, "this-figure-is-included-in-the-main-text"], [7, "id1"]], "plot 2. vertical profile of metrics for tendency variables": [[7, "plot-2-vertical-profile-of-metrics-for-tendency-variables"]], "This figure is included in the SI": [[7, "this-figure-is-included-in-the-si"]], "plot 3. plot 1 and plot 2 together for MAE and R2": [[7, "plot-3-plot-1-and-plot-2-together-for-mae-and-r2"]], "plot 4. scatter plot": [[7, "plot-4-scatter-plot"]], "Figure 5: 2D Maps": [[7, "figure-5-2d-maps"]], "Load data and set pressure grid": [[8, "load-data-and-set-pressure-grid"], [10, "load-data-and-set-pressure-grid"]], "Weight outputs": [[8, "weight-outputs"], [10, "weight-outputs"]], "Calculate biases": [[8, "calculate-biases"]], "Get pressure axis": [[8, "get-pressure-axis"]], "Make plots": [[8, "make-plots"]], "Importing packages and data_utils.py": [[9, "importing-packages-and-data-utils-py"], [11, "importing-packages-and-data-utils-py"]], "Load samples": [[9, "load-samples"]], "Define useful functions": [[9, "define-useful-functions"]], "Calculate CRPS": [[9, "calculate-crps"]], "Evaluation metrics": [[10, "evaluation-metrics"]], "Plot 1": [[10, "plot-1"]], "Prediction skill of temperature and specific humidity tendencies": [[11, "prediction-skill-of-temperature-and-specific-humidity-tendencies"]], "Instantiating class": [[11, "instantiating-class"]], "Loading data and setting pressure grid": [[11, "loading-data-and-setting-pressure-grid"]], "Plot pressure latitude R2 analysis": [[11, "plot-pressure-latitude-r2-analysis"]], "Code Installation": [[13, "code-installation"]], "Baseline Models": [[14, "baseline-models"]], "Quickstart": [[15, "quickstart"]]}, "indexentries": {}})